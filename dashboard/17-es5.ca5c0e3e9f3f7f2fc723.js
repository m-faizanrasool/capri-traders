!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{ZOSX:function(e,a,i){"use strict";i.d(a,"a",function(){return b});var r=i("tk/3"),o=i("AytR"),c=i("fXoL"),b=function(){var e=function(){function e(n){t(this,e),this.httpClient=n}return n(e,[{key:"getItems",value:function(t){var e=new r.e({fromObject:t}).toString();return console.log(e),this.httpClient.get(o.a.apiUrl+"filtered-items?"+e)}},{key:"getAllItems",value:function(){return this.httpClient.get(o.a.apiUrl+"all-items")}},{key:"getCreateItemParams",value:function(){return this.httpClient.get(o.a.apiUrl+"items/create")}},{key:"addItem",value:function(t){return this.httpClient.post(o.a.apiUrl+"items",t)}},{key:"updateItem",value:function(t){return this.httpClient.patch(o.a.apiUrl+"items/"+t.id,t)}},{key:"toggle_visibility",value:function(t){return this.httpClient.post(o.a.apiUrl+"items/toggle-visibility",{id:t})}},{key:"deleteItem",value:function(t){return this.httpClient.delete(o.a.apiUrl+"items/"+t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.ac(r.c))},e.\u0275prov=c.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},cvkL:function(e,a,i){"use strict";i.r(a),i.d(a,"PaymentsModule",function(){return X});var r,o,c=i("ofXK"),b=i("fXoL"),d=i("tyNb"),l=((r=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=b.Hb({type:r,selectors:[["app-payments"]],decls:1,vars:0,template:function(t,e){1&t&&b.Ob(0,"router-outlet")},directives:[d.l],styles:[""]}),r),u=i("ZOSX"),p=i("j8vG"),m=i("vjb8"),s=i("AytR"),h=i("tk/3"),f=((o=function(){function e(n){t(this,e),this.httpClient=n}return n(e,[{key:"getAll",value:function(){return this.httpClient.get(s.a.apiUrl+"sales")}},{key:"get",value:function(t){return this.httpClient.get("".concat(s.a.apiUrl,"sales/").concat(t))}},{key:"add",value:function(t){return this.httpClient.post(s.a.apiUrl+"payments",t)}},{key:"update",value:function(t){return this.httpClient.patch(s.a.apiUrl+"payments/"+t.id,t)}},{key:"delete",value:function(t){return this.httpClient.delete(s.a.apiUrl+"payments/"+t)}}]),e}()).\u0275fac=function(t){return new(t||o)(b.ac(h.c))},o.\u0275prov=b.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),y=i("q8Zq"),v=i("0IaG"),g=i("3Pt+"),S=i("Xa2L"),T=i("kmnG"),C=i("d3UM"),_=i("qFsG"),k=i("FKr1"),A=i("NFeN"),M=i("bTqV");function I(t,e){if(1&t&&(b.Tb(0,"mat-option",41),b.Kc(1),b.Sb()),2&t){var n=e.$implicit;b.nc("value",n.id),b.Ab(1),b.Mc(" ",n.name," ")}}function K(t,e){if(1&t&&(b.Tb(0,"mat-option",41),b.Kc(1),b.Sb()),2&t){var n=e.$implicit;b.nc("value",n.name),b.Ab(1),b.Mc(" ",n.name," ")}}function U(t,e){if(1&t){var n=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",37),b.Tb(2,"div"),b.Tb(3,"div"),b.Tb(4,"strong"),b.Kc(5,"Company Head:"),b.Sb(),b.Kc(6),b.Sb(),b.Tb(7,"div"),b.Tb(8,"strong"),b.Kc(9,"Party:"),b.Sb(),b.Kc(10),b.Sb(),b.Tb(11,"div"),b.Tb(12,"strong"),b.Kc(13,"Total:"),b.Sb(),b.Kc(14),b.Sb(),b.Sb(),b.Tb(15,"div"),b.Tb(16,"span",44),b.dc("click",function(){b.Ac(n);var t=e.$implicit;return b.hc(2).addBill(t)}),b.Kc(17," Add "),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){var a=e.$implicit;b.Ab(6),b.Mc(" ",a.company_head.name," "),b.Ab(4),b.Mc(" ",a.party.name,""),b.Ab(4),b.Mc(" ",a.total,"")}}function q(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"h4"),b.Kc(2,"Searched Bills"),b.Sb(),b.Tb(3,"div",42),b.Ic(4,U,18,3,"div",43),b.Sb(),b.Sb()),2&t){var n=b.hc();b.Ab(4),b.nc("ngForOf",n.found_bills)}}function w(t,e){if(1&t){var n=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",37),b.Tb(2,"div"),b.Tb(3,"div"),b.Tb(4,"strong"),b.Kc(5,"Company Head:"),b.Sb(),b.Kc(6),b.Sb(),b.Tb(7,"div"),b.Tb(8,"strong"),b.Kc(9,"Party:"),b.Sb(),b.Kc(10),b.Sb(),b.Tb(11,"div"),b.Tb(12,"strong"),b.Kc(13,"Total:"),b.Sb(),b.Kc(14),b.Sb(),b.Sb(),b.Tb(15,"div"),b.Tb(16,"span",46),b.dc("click",function(){b.Ac(n);var t=e.index;return b.hc(2).removeBill(t)}),b.Tb(17,"mat-icon"),b.Kc(18,"delete"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){var a=e.$implicit;b.Ab(6),b.Mc(" ",a.company_head.name," "),b.Ab(4),b.Mc(" ",a.party.name,""),b.Ab(4),b.Mc(" ",a.total,"")}}function x(t,e){if(1&t&&(b.Tb(0,"div",45),b.Tb(1,"h4"),b.Kc(2,"Attached Bills"),b.Sb(),b.Tb(3,"div",42),b.Ic(4,w,19,3,"div",43),b.Sb(),b.Sb()),2&t){var n=b.hc();b.Ab(4),b.nc("ngForOf",n.attached_bills)}}function D(t,e){if(1&t&&(b.Tb(0,"mat-option",41),b.Kc(1),b.Sb()),2&t){var n=e.$implicit;b.nc("value",n.id),b.Ab(1),b.Mc(" ",n.name," ")}}function E(t,e){if(1&t){var n=b.Ub();b.Tb(0,"div",9),b.Tb(1,"div",47),b.Tb(2,"mat-form-field",13),b.Tb(3,"input",48),b.dc("ngModelChange",function(t){return b.Ac(n),b.hc().payment.cheque_no=t}),b.Sb(),b.Tb(4,"mat-error"),b.Kc(5," Cheque no is "),b.Tb(6,"strong"),b.Kc(7,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(8,"div",47),b.Tb(9,"mat-form-field",13),b.Tb(10,"input",49),b.dc("ngModelChange",function(t){return b.Ac(n),b.hc().payment.cheque_date=t}),b.Sb(),b.Tb(11,"mat-error"),b.Kc(12," Cheque Date is "),b.Tb(13,"strong"),b.Kc(14,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){var a=b.hc();b.Ab(3),b.nc("ngModel",a.payment.cheque_no),b.Ab(7),b.nc("ngModel",a.payment.cheque_date)}}function O(t,e){if(1&t){var n=b.Ub();b.Tb(0,"button",50),b.dc("click",function(){b.Ac(n);var t=b.hc(),e=b.wc(8);return t.onSubmit(e,"RECEIVED")}),b.Kc(1),b.Sb()}if(2&t){var a=b.hc(),i=b.wc(8);b.nc("disabled",i.invalid||i.pristine),b.Ab(1),b.Mc(" ","EDIT"===a.mode?"Update":"Save"," as Received ")}}function P(t,e){if(1&t){var n=b.Ub();b.Tb(0,"button",51),b.dc("click",function(){b.Ac(n);var t=b.hc(),e=b.wc(8);return t.onSubmit(e,"SENT")}),b.Kc(1),b.Sb()}if(2&t){var a=b.hc(),i=b.wc(8);b.nc("disabled",i.invalid||i.pristine),b.Ab(1),b.Mc(" ","EDIT"===a.mode?"Update":"Save"," as Sent ")}}var H,F,N=((H=function(){function e(n,a,i,r,o,c,b){t(this,e),this.itemsService=n,this.companyHeadsService=a,this.partiesService=i,this.paymentService=r,this.saleService=o,this.dialog=c,this.cdr=b,this.company_heads=[],this.parties=[],this.mode="ADD",this.pay_types=[{name:"CASH"},{name:"CHEQUE"}],this.found_bills=[],this.attached_bills=[],this.payment={company_head_id:1,party_id:1,action:"",type:"",date:"",remarms:"",sale_ids:[],narration:"",cheque_no:"",cheque_date:"",amount:"",tax:""}}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.itemsService.getCreateItemParams().subscribe(function(e){t.itemData=e}),this.companyHeadsService.getAllCompanyHeads().subscribe(function(e){t.company_heads=e.company_heads}),this.partiesService.getAllParties().subscribe(function(e){t.parties=e.parties})}},{key:"calc_tax",value:function(t){this.payment.amount&&(this.payment.tax=this.payment.amount*t/100)}},{key:"find_bill",value:function(t){var e=this;this.saleService.search({bill_no:t,company_head_id:this.payment.company_head_id,party_id:this.payment.party_id,pay_status:"PENDING"}).subscribe(function(t){e.found_bills=t,console.log(e.found_bills),e.cdr.detectChanges()})}},{key:"addBill",value:function(t){this.attached_bills.find(function(e){return e.id==t.id})||this.attached_bills.push(t)}},{key:"removeBill",value:function(t){this.attached_bills.splice(t,1)}},{key:"onSubmit",value:function(t,e){t.invalid||(this.payment.action=e,console.log(this.payment),this.payment.sale_ids=this.attached_bills.map(function(t){return t.id}),"ADD"===this.mode?this.paymentService.add(this.payment).subscribe(function(t){console.log(t)}):this.paymentService.update(this.payment).subscribe(function(t){console.log(t)}))}}]),e}()).\u0275fac=function(t){return new(t||H)(b.Nb(u.a),b.Nb(p.a),b.Nb(m.a),b.Nb(f),b.Nb(y.a),b.Nb(v.c),b.Nb(b.h))},H.\u0275cmp=b.Hb({type:H,selectors:[["app-add-or-edit"]],decls:88,vars:18,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"form"],["paymentForm","ngForm"],[1,"card-body"],[1,"card-body-progress"],[3,"diameter"],[1,"row"],[1,"col-lg-7"],[1,"form-group","row"],[1,"col-lg-12","kt-margin-bottom-20-mobile"],[1,"mat-form-field-fluid"],["placeholder","Company Head","name","company_head_id","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-6","kt-margin-bottom-20-mobile"],["placeholder","Type","name","type","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Date","name","date","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Remarks","name","narration",3,"ngModel","ngModelChange"],[1,"col"],[1,"col-10","kt-margin-bottom-20-mobile"],["matInput","","type","number","placeholder","Bill #","name","bill_no",3,"disabled","keyup"],["find_bill_no",""],[4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"col-lg-4","kt-margin-bottom-20-mobile"],["placeholder","Party","name","party_id","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Narration","name","remarks",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],["type","number","matInput","","placeholder","Amount","name","amount","required","",3,"ngModel","ngModelChange"],[1,"col-lg-3","kt-margin-bottom-20-mobile"],["type","number","matInput","","placeholder","Tax","name","tax",3,"ngModel","ngModelChange"],["type","number","min","0","max","100","matInput","","placeholder","Tax Percent","name","tax_percent",3,"input"],["tax_percent_input",""],[1,"separator","separator-dashed","my-6"],[1,"card-footer"],[1,"d-flex","justify-content-between"],[1,"mr-2"],["type","submit","mat-raised-button","","color","primary","class","mr-3",3,"disabled","click",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"value"],[1,"overflow-auto","max-height-100"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"mt-5"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"col-lg-2","kt-margin-bottom-20-mobile"],["type","number","matInput","","placeholder","Cheque no","name","cheque_no","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Cheque Date","name","date","required","",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button","","color","primary",1,"mr-3",3,"disabled","click"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t){var n=b.Ub();b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"h3"),b.Kc(4,"Payments"),b.Sb(),b.Sb(),b.Ob(5,"div",3),b.Sb(),b.Tb(6,"div"),b.Tb(7,"form",4,5),b.Tb(9,"div",6),b.Tb(10,"div",7),b.Ob(11,"mat-spinner",8),b.Sb(),b.Tb(12,"div",9),b.Tb(13,"div",10),b.Tb(14,"div",11),b.Tb(15,"div",12),b.Tb(16,"mat-form-field",13),b.Tb(17,"mat-select",14),b.dc("ngModelChange",function(t){return e.payment.company_head_id=t}),b.Ic(18,I,2,2,"mat-option",15),b.Sb(),b.Tb(19,"mat-error"),b.Kc(20," Company Head is "),b.Tb(21,"strong"),b.Kc(22,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(23,"div",11),b.Tb(24,"div",16),b.Tb(25,"mat-form-field",13),b.Tb(26,"mat-select",17),b.dc("ngModelChange",function(t){return e.payment.type=t}),b.Ic(27,K,2,2,"mat-option",15),b.Sb(),b.Tb(28,"mat-error"),b.Tb(29,"strong"),b.Kc(30,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(31,"div",16),b.Tb(32,"mat-form-field",13),b.Tb(33,"input",18),b.dc("ngModelChange",function(t){return e.payment.date=t}),b.Sb(),b.Tb(34,"mat-error"),b.Kc(35," Date is "),b.Tb(36,"strong"),b.Kc(37,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(38,"div",11),b.Tb(39,"div",12),b.Tb(40,"mat-form-field",13),b.Tb(41,"textarea",19),b.dc("ngModelChange",function(t){return e.payment.narration=t}),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(42,"div",20),b.Tb(43,"h4"),b.Kc(44,"Find Bill"),b.Sb(),b.Tb(45,"div",11),b.Tb(46,"div",21),b.Tb(47,"mat-form-field",13),b.Tb(48,"input",22,23),b.dc("keyup",function(){b.Ac(n);var t=b.wc(49);return e.find_bill(t.value)}),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ic(50,q,5,1,"div",24),b.Ic(51,x,5,1,"div",25),b.Ob(52,"div"),b.Sb(),b.Sb(),b.Tb(53,"div",11),b.Tb(54,"div",26),b.Tb(55,"mat-form-field",13),b.Tb(56,"mat-select",27),b.dc("ngModelChange",function(t){return e.payment.party_id=t}),b.Ic(57,D,2,2,"mat-option",15),b.Sb(),b.Tb(58,"mat-error"),b.Kc(59," Party is "),b.Tb(60,"strong"),b.Kc(61,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(62,"div",26),b.Tb(63,"mat-form-field",13),b.Tb(64,"input",28),b.dc("ngModelChange",function(t){return e.payment.remarks=t}),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ic(65,E,15,2,"div",29),b.Tb(66,"div",9),b.Tb(67,"div",26),b.Tb(68,"mat-form-field",13),b.Tb(69,"input",30),b.dc("ngModelChange",function(t){return e.payment.amount=t}),b.Sb(),b.Tb(70,"mat-error"),b.Kc(71," Amount is "),b.Tb(72,"strong"),b.Kc(73,"required"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(74,"div",31),b.Tb(75,"mat-form-field",13),b.Tb(76,"input",32),b.dc("ngModelChange",function(t){return e.payment.tax=t}),b.Sb(),b.Sb(),b.Sb(),b.Tb(77,"div",31),b.Tb(78,"mat-form-field",13),b.Tb(79,"input",33,34),b.dc("input",function(){b.Ac(n);var t=b.wc(80);return e.calc_tax(t.value)}),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ob(81,"div",35),b.Sb(),b.Sb(),b.Tb(82,"div",36),b.Tb(83,"div",37),b.Tb(84,"div",38),b.Ic(85,O,2,2,"button",39),b.Sb(),b.Tb(86,"div"),b.Ic(87,P,2,2,"button",40),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}2&t&&(b.Ab(11),b.nc("diameter",20),b.Ab(6),b.nc("ngModel",e.payment.company_head_id),b.Ab(1),b.nc("ngForOf",e.company_heads),b.Ab(8),b.nc("ngModel",e.payment.type),b.Ab(1),b.nc("ngForOf",e.pay_types),b.Ab(6),b.nc("ngModel",e.payment.date),b.Ab(8),b.nc("ngModel",e.payment.narration),b.Ab(7),b.nc("disabled",!e.payment.party_id||!e.payment.company_head_id),b.Ab(2),b.nc("ngIf",e.found_bills.length),b.Ab(1),b.nc("ngIf",e.attached_bills.length),b.Ab(5),b.nc("ngModel",e.payment.party_id),b.Ab(1),b.nc("ngForOf",e.parties),b.Ab(7),b.nc("ngModel",e.payment.remarks),b.Ab(1),b.nc("ngIf","CHEQUE"===e.payment.type),b.Ab(4),b.nc("ngModel",e.payment.amount),b.Ab(7),b.nc("ngModel",e.payment.tax),b.Ab(9),b.nc("ngIf","ADD"===e.mode||"EDIT"===e.mode&&"RECEIVED"==e.payment.action),b.Ab(2),b.nc("ngIf","RECEIVED"!==e.payment.action))},directives:[g.y,g.o,g.p,S.b,T.c,C.a,g.u,g.n,g.q,c.m,T.b,_.a,g.c,c.n,g.s,k.g,A.a,M.b],styles:[".max-height-100[_ngcontent-%COMP%]{max-height:100px}"]}),H),j=i("+0xr"),R=i("M9IT"),B=i("Dh3D"),X=((F=function e(){t(this,e)}).\u0275mod=b.Lb({type:F}),F.\u0275inj=b.Kb({factory:function(t){return new(t||F)},imports:[[c.c,g.j,M.c,j.l,R.b,S.a,A.b,v.e,g.t,M.c,C.b,_.b,B.c,d.k.forChild([{path:"",component:l,children:[{path:"",redirectTo:"add-or-edit",pathMatch:"full"},{path:"add-or-edit",component:N}]}])]]}),F)},j8vG:function(e,a,i){"use strict";i.d(a,"a",function(){return b});var r=i("AytR"),o=i("fXoL"),c=i("tk/3"),b=function(){var e=function(){function e(n){t(this,e),this.httpClient=n}return n(e,[{key:"getAllCompanyHeads",value:function(){return this.httpClient.get(r.a.apiUrl+"company-heads")}},{key:"addCompanyHead",value:function(t){return this.httpClient.post(r.a.apiUrl+"company-heads",t)}},{key:"updateCompanyHead",value:function(t){return this.httpClient.patch(r.a.apiUrl+"company-heads/"+t.id,t)}},{key:"deleteCompanyHead",value:function(t){return this.httpClient.delete(r.a.apiUrl+"company-heads/"+t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(c.c))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},vjb8:function(e,a,i){"use strict";i.d(a,"a",function(){return b});var r=i("AytR"),o=i("fXoL"),c=i("tk/3"),b=function(){var e=function(){function e(n){t(this,e),this.httpClient=n}return n(e,[{key:"getAllParties",value:function(){return this.httpClient.get(r.a.apiUrl+"parties")}},{key:"addParty",value:function(t){return this.httpClient.post(r.a.apiUrl+"parties",t)}},{key:"updateParty",value:function(t){return this.httpClient.patch(r.a.apiUrl+"parties/"+t.id,t)}},{key:"deleteParty",value:function(t){return this.httpClient.delete(r.a.apiUrl+"parties/"+t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(c.c))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();