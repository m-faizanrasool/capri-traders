(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{U5Jw:function(e,t,a){"use strict";a.r(t),a.d(t,"CategoriesModule",function(){return B});var o=a("ofXK"),i=a("M9IT"),r=a("+0xr"),c=a("zyfY"),n=a("0IaG"),s=a("fXoL"),d=a("3Pt+"),b=a("bTqV");let l=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.category={name:"",id:""}}ngOnInit(){this.data&&this.data.category?(this.category=this.data.category,this.title="Update category",this.mode="Update"):(this.title="Add category",this.mode="Add")}onSubmit(){this.dialogRef.close({category:this.category,isEdit:!1})}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(n.f),s.Nb(n.a))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-add"]],decls:15,vars:4,consts:[[3,"ngSubmit"],["f","ngForm"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-group"],["placeholder","Name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","submit","color","primary","mat-raised-button","",1,"mr-2",3,"disabled"]],template:function(e,t){if(1&e&&(s.Tb(0,"form",0,1),s.dc("ngSubmit",function(){return t.onSubmit()}),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"div",4),s.Lc(5),s.Sb(),s.Sb(),s.Tb(6,"div",5),s.Tb(7,"div",6),s.Tb(8,"input",7),s.dc("ngModelChange",function(e){return t.category.name=e}),s.Sb(),s.Sb(),s.Sb(),s.Tb(9,"div",8),s.Tb(10,"button",9),s.Lc(11," Cancel"),s.Sb(),s.Lc(12,"\xa0 "),s.Tb(13,"button",10),s.Lc(14),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e){const e=s.xc(1);s.Ab(5),s.Mc(t.title),s.Ab(3),s.oc("ngModel",t.category.name),s.Ab(5),s.oc("disabled",e.invalid),s.Ab(1),s.Nc(" ",t.mode," ")}},directives:[d.y,d.o,d.p,d.c,d.u,d.n,d.q,b.b,n.d],styles:[".card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e})();var m=a("AytR"),u=a("tk/3");let g=(()=>{class e{constructor(e){this.httpClient=e}getCategories(){return this.httpClient.get(m.a.apiUrl+"categories")}addCategory(e){return this.httpClient.post(m.a.apiUrl+"categories",e)}updateCategory(e){return this.httpClient.patch(m.a.apiUrl+"categories/"+e.id,e)}deleteCategory(e){return this.httpClient.delete(m.a.apiUrl+"categories/"+e)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(u.c))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=a("OlR4"),h=a("NFeN"),f=a("Xa2L");function S(e,t){1&e&&(s.Tb(0,"mat-header-cell"),s.Lc(1," Name "),s.Sb())}function y(e,t){if(1&e&&(s.Tb(0,"mat-cell"),s.Lc(1),s.Sb()),2&e){const e=t.$implicit;s.Ab(1),s.Nc(" ",e.name," ")}}function C(e,t){1&e&&(s.Tb(0,"mat-header-cell"),s.Lc(1," Actions "),s.Sb())}function v(e,t){if(1&e){const e=s.Ub();s.Tb(0,"mat-cell"),s.Tb(1,"button",19),s.dc("click",function(){s.Bc(e);const a=t.$implicit;return s.hc().editCategory(a)}),s.Tb(2,"mat-icon"),s.Lc(3,"create"),s.Sb(),s.Sb(),s.Lc(4,"\xa0 "),s.Tb(5,"button",20),s.dc("click",function(){s.Bc(e);const a=t.$implicit,o=t.index;return s.hc().deleteCategory(a.id,o)}),s.Tb(6,"mat-icon"),s.Lc(7,"delete"),s.Sb(),s.Sb(),s.Sb()}}function T(e,t){1&e&&s.Ob(0,"mat-header-row")}function w(e,t){1&e&&s.Ob(0,"mat-row")}function k(e,t){1&e&&(s.Tb(0,"div",21),s.Lc(1," No records found "),s.Sb())}function L(e,t){1&e&&(s.Tb(0,"div",21),s.Lc(1,"Please wait...."),s.Sb())}function A(e,t){1&e&&s.Ob(0,"mat-spinner",22),2&e&&s.oc("diameter",20)}const N=function(){return[5,10,20]};let J=(()=>{class e{constructor(e,t,a,o){this.categoriesService=e,this.commonService=t,this.cdr=a,this.dialog=o,this.loaded=!1,this.displayedColumns=["name","actions"],this.categories=[]}ngOnInit(){this.categoriesService.getCategories().subscribe(e=>{this.categories=e.categories,this.renderCategories(),this.loaded=!0,this.cdr.detectChanges()})}renderCategories(){this.dataSource=new r.k(this.categories),this.dataSource.paginator=this.paginator}addCategory(){this.dialog.open(l,{width:"440px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.categoriesService.addCategory(e.category).subscribe(e=>{this.categories.push(e.category),this.commonService.openSnackBar(e.message),this.renderCategories()},({error:e})=>{this.commonService.openSnackBar(e.errors.name[0],4e3)})})}editCategory(e){this.dialog.open(l,{data:{category:e},width:"440px",disableClose:!0}).afterClosed().subscribe(t=>{t&&this.categoriesService.updateCategory(t.category).subscribe(a=>{e=t.category,this.commonService.openSnackBar(a.message)},({error:e})=>{this.commonService.openSnackBar(e.errors.name[0],4e3)})})}deleteCategory(e,t){this.dialog.open(c.a,{data:{title:"Delete category",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(a=>{a&&a.confirm&&this.categoriesService.deleteCategory(e).subscribe(e=>{this.categories.splice(t,1),this.renderCategories(),this.commonService.openSnackBar(e.message)},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})})}}return e.\u0275fac=function(t){return new(t||e)(s.Nb(g),s.Nb(p.a),s.Nb(s.h),s.Nb(n.c))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-categories"]],viewQuery:function(e,t){if(1&e&&s.Fc(i.a,!0),2&e){let e;s.wc(e=s.ec())&&(t.paginator=e.first)}},decls:25,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mat-icon-button","","color","primary","matTooltip","Edit user",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete user","type","button",3,"click"],[1,"mat-table-message"],[3,"diameter"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"h3"),s.Lc(4,"Categories"),s.Sb(),s.Sb(),s.Tb(5,"div",3),s.Tb(6,"button",4),s.dc("click",function(){return t.addCategory()}),s.Lc(7," Add Category "),s.Sb(),s.Sb(),s.Sb(),s.Tb(8,"div",5),s.Tb(9,"div",6),s.Tb(10,"mat-table",7,8),s.Rb(12,9),s.Jc(13,S,2,0,"mat-header-cell",10),s.Jc(14,y,2,1,"mat-cell",11),s.Qb(),s.Rb(15,12),s.Jc(16,C,2,0,"mat-header-cell",10),s.Jc(17,v,8,0,"mat-cell",11),s.Qb(),s.Jc(18,T,1,0,"mat-header-row",13),s.Jc(19,w,1,0,"mat-row",14),s.Sb(),s.Jc(20,k,2,0,"div",15),s.Jc(21,L,2,0,"div",15),s.Sb(),s.Tb(22,"div",16),s.Jc(23,A,1,1,"mat-spinner",17),s.Ob(24,"mat-paginator",18),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(10),s.oc("dataSource",t.dataSource),s.Ab(8),s.oc("matHeaderRowDef",t.displayedColumns),s.Ab(1),s.oc("matRowDefColumns",t.displayedColumns),s.Ab(1),s.oc("ngIf",t.loaded&&0==t.categories.length),s.Ab(1),s.oc("ngIf",!t.loaded),s.Ab(2),s.oc("ngIf",!t.loaded),s.Ab(1),s.oc("pageSize",10)("pageSizeOptions",s.rc(9,N))("showFirstLastButtons",!0))},directives:[r.j,r.c,r.e,r.b,r.g,r.i,o.n,i.a,r.d,r.a,b.b,h.a,r.f,r.h,f.b],styles:[""]}),e})();var D=a("tyNb"),I=a("93Pz"),R=a("kmnG");let B=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(t){return new(t||e)},imports:[[o.c,I.a,b.c,r.l,i.b,h.b,f.a,d.j,R.e,n.e,D.k.forChild([{path:"",component:J}])]]}),e})()}}]);