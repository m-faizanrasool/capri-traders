(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{U1Ny:function(e,t,a){"use strict";a.r(t),a.d(t,"SalesModule",function(){return E});var n=a("ofXK"),o=a("tyNb"),c=a("0wwu"),i=a("0IaG"),d=a("fXoL"),r=a("3Pt+"),b=a("bTqV");let l=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.product={quantity:"",rate:"",description:"",id:""}}ngOnInit(){this.data&&this.data.product?(this.product=this.data.product,this.index=this.data.index,this.title="Update Quantity or Rate",this.mode="Update"):(this.title="Add product",this.mode="Add")}onSubmit(){this.dialogRef.close({product:this.product,index:this.index,isEdit:!1})}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(i.f),d.Nb(i.a))},e.\u0275cmp=d.Hb({type:e,selectors:[["app-edit"]],decls:25,vars:6,consts:[[3,"ngSubmit"],["f","ngForm"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-group"],["placeholder","Quantity","name","quantity","required","",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Rate","name","rate","required","",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Description","name","rate","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","submit","color","primary","mat-raised-button","",1,"mr-2",3,"disabled"]],template:function(e,t){if(1&e&&(d.Tb(0,"form",0,1),d.dc("ngSubmit",function(){return t.onSubmit()}),d.Tb(2,"div",2),d.Tb(3,"div",3),d.Tb(4,"div",4),d.Lc(5),d.Sb(),d.Sb(),d.Tb(6,"div",5),d.Tb(7,"div",6),d.Tb(8,"label"),d.Lc(9,"Quantity:"),d.Sb(),d.Tb(10,"input",7),d.dc("ngModelChange",function(e){return t.product.quantity=e}),d.Sb(),d.Sb(),d.Tb(11,"div",6),d.Tb(12,"label"),d.Lc(13,"Rate:"),d.Sb(),d.Tb(14,"input",8),d.dc("ngModelChange",function(e){return t.product.rate=e}),d.Sb(),d.Sb(),d.Tb(15,"div",6),d.Tb(16,"label"),d.Lc(17,"Description:"),d.Sb(),d.Tb(18,"input",9),d.dc("ngModelChange",function(e){return t.product.description=e}),d.Sb(),d.Sb(),d.Sb(),d.Tb(19,"div",10),d.Tb(20,"button",11),d.Lc(21," Cancel"),d.Sb(),d.Lc(22,"\xa0 "),d.Tb(23,"button",12),d.Lc(24),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e){const e=d.xc(1);d.Ab(5),d.Mc(t.title),d.Ab(5),d.oc("ngModel",t.product.quantity),d.Ab(4),d.oc("ngModel",t.product.rate),d.Ab(4),d.oc("ngModel",t.product.description),d.Ab(5),d.oc("disabled",e.invalid),d.Ab(1),d.Nc(" ",t.mode," ")}},directives:[r.y,r.o,r.p,r.c,r.u,r.n,r.q,b.b,i.d],styles:[".card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e})();var s=a("+0xr"),m=a("S3Px"),u=a("OlR4"),p=a("Xa2L"),h=a("kmnG"),g=a("d3UM"),f=a("qFsG"),S=a("M9IT"),T=a("FKr1"),y=a("NFeN");function v(e,t){if(1&e&&(d.Tb(0,"mat-option",52),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.oc("value",e.id),d.Ab(1),d.Nc(" ",e.name," ")}}function M(e,t){if(1&e&&(d.Tb(0,"mat-option",52),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.oc("value",e.name),d.Ab(1),d.Nc(" ",e.name," ")}}function C(e,t){if(1&e&&(d.Tb(0,"mat-option",52),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.oc("value",e.name),d.Ab(1),d.Nc(" ",e.name," ")}}function L(e,t){if(1&e&&(d.Tb(0,"mat-option",52),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.oc("value",e.id),d.Ab(1),d.Nc(" ",e.name," ")}}function A(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Name "),d.Sb())}function _(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.name," ")}}function q(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Brand "),d.Sb())}function w(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.brand?e.brand.name:""," ")}}function P(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Quantity "),d.Sb())}function J(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.quantity," ")}}function N(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Rate "),d.Sb())}function R(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.rate," ")}}function I(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Discount "),d.Sb())}function k(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.discount," ")}}function D(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Description "),d.Sb())}function O(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Lc(1),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.Nc(" ",e.description," ")}}function x(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Image "),d.Sb())}function F(e,t){if(1&e&&(d.Tb(0,"mat-cell"),d.Ob(1,"img",53),d.Sb()),2&e){const e=t.$implicit;d.Ab(1),d.oc("src",e.image_url,d.Cc)}}function Q(e,t){1&e&&(d.Tb(0,"mat-header-cell"),d.Lc(1," Actions "),d.Sb())}function $(e,t){if(1&e){const e=d.Ub();d.Tb(0,"mat-cell"),d.Tb(1,"a",54),d.dc("click",function(){d.Bc(e);const a=t.$implicit,n=t.index;return d.hc().editSaleItemsProduct(a,n)}),d.Tb(2,"mat-icon"),d.Lc(3,"create"),d.Sb(),d.Sb(),d.Lc(4,"\xa0 "),d.Tb(5,"a",55),d.dc("click",function(){d.Bc(e);const a=t.index;return d.hc().removeFromSaleItems(a)}),d.Tb(6,"mat-icon"),d.Lc(7,"delete"),d.Sb(),d.Sb(),d.Sb()}}function B(e,t){1&e&&d.Ob(0,"mat-header-row")}function H(e,t){1&e&&d.Ob(0,"mat-row")}function j(e,t){1&e&&(d.Tb(0,"div",56),d.Lc(1," No records found "),d.Sb())}function z(e,t){1&e&&(d.Tb(0,"div",56),d.Lc(1," Please wait.... "),d.Sb())}function U(e,t){1&e&&d.Ob(0,"mat-spinner",9),2&e&&d.oc("diameter",20)}let G=(()=>{class e{constructor(e,t,a,n){this.productsService=e,this.commonService=t,this.cdr=a,this.dialog=n,this.company_heads=[{id:1,name:"Capri Traders"},{id:2,name:"Capri Traders2"},{id:3,name:"Capri Traders3"}],this.products=[],this.pay_modes=[{name:"credit"},{name:"cash"}],this.pay_statuses=[{name:"pending"},{name:"done"}],this.sale={company_head:"",bill_no:"",po_no:"",grn:"",party_name:"",pay_mode:"",remarks:"",pay_status:""},this.selectedProduct={id:"",quantity:"",rate:""},this.dataSource=new s.k([]),this.sale_items=[],this.pageSize=10,this.displayedColumns=["name","brand","quantity","rate","discount","description","image","actions"],this.loaded=!1}ngOnInit(){this.productsService.getCreateProductParams().subscribe(e=>{this.productData=e}),this.productsService.getAllProducts().subscribe(this.handleResponse.bind(this))}handleResponse(e){this.products=e.products,this.loaded=!0,this.cdr.detectChanges()}onSubmit(){console.log("here",this.sale)}addProduct(){this.dialog.open(c.a,{data:{paramsData:this.productData},disableClose:!0}).afterClosed().subscribe(e=>{})}AddProductToSaleItems(){if(this.selectedProduct.id){const e=this.products.find(e=>e.id==this.selectedProduct.id);e.rate=this.selectedProduct.rate,e.quantity=this.selectedProduct.quantity,this.sale_items.push(JSON.parse(JSON.stringify(e))),this.dataSource.data=this.sale_items,this.cdr.detectChanges(),this.loaded=!0}}removeFromSaleItems(e){this.sale_items.splice(e,1),this.dataSource.data=this.sale_items}editSaleItemsProduct(e,t){this.dialog.open(l,{data:{product:e,index:t},width:"440px",disableClose:!0}).afterClosed().subscribe(e=>{e&&(this.sale_items[e.index].quantity=e.product.quantity,this.sale_items[e.index].rate=e.product.rate,this.dataSource.data=this.sale_items,this.cdr.detectChanges())})}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(m.a),d.Nb(u.a),d.Nb(d.h),d.Nb(i.c))},e.\u0275cmp=d.Hb({type:e,selectors:[["app-sales"]],decls:126,vars:26,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"click"],[1,"form",3,"ngSubmit"],["f","ngForm"],[1,"card-body"],[1,"card-body-progress"],[3,"diameter"],[1,"form-group","row"],[1,"col-lg-6","kt-margin-bottom-20-mobile"],[1,"mat-form-field-fluid"],["placeholder","Company Head","name","company_head","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-2","kt-margin-bottom-20-mobile"],["type","number","matInput","","placeholder","Bill/Ref#","name","bill_no",3,"ngModel","ngModelChange"],["type","number","matInput","","placeholder","PO#","name","po_no",3,"ngModel","ngModelChange"],["type","number","matInput","","placeholder","GRN","name","grn",3,"ngModel","ngModelChange"],[1,"col-lg-4","kt-margin-bottom-20-mobile"],["matInput","","type","text","placeholder","Party Name","name","sale.party_name",3,"ngModel","ngModelChange"],["placeholder","Pay Mode","name","pay_mode","required","",3,"ngModel","ngModelChange"],["placeholder","Pay Status","name","pay_status","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Remarks","name","remarks",3,"ngModel","ngModelChange"],[1,"col-lg-3","kt-margin-bottom-20-mobile"],["placeholder","Enter Item","name","product","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Quantity","name","quantity","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Rate","name","rate","required","",3,"ngModel","ngModelChange"],[1,"separator","separator-dashed","my-6"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","brand"],["matColumnDef","quantity"],["matColumnDef","rate"],["matColumnDef","discount"],["matColumnDef","description"],["matColumnDef","image"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","showFirstLastButtons","length"],[1,"card-footer"],[1,"d-flex","justify-content-between"],[1,"mr-2"],["type","button","mat-raised-button","","color","primary",3,"disabled"],[3,"value"],[1,"img-fluid","w-75",3,"src"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn","type","button",3,"click"],[1,"mat-table-message"]],template:function(e,t){if(1&e&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Tb(2,"div",2),d.Tb(3,"h3"),d.Lc(4,"Sales"),d.Sb(),d.Sb(),d.Tb(5,"div",3),d.Tb(6,"button",4),d.dc("click",function(){return t.addProduct()}),d.Lc(7," Add Product "),d.Sb(),d.Sb(),d.Sb(),d.Tb(8,"div"),d.Tb(9,"form",5,6),d.dc("ngSubmit",function(){return t.onSubmit()}),d.Tb(11,"div",7),d.Tb(12,"div",8),d.Ob(13,"mat-spinner",9),d.Sb(),d.Tb(14,"div",10),d.Tb(15,"div",11),d.Tb(16,"mat-form-field",12),d.Tb(17,"mat-select",13),d.dc("ngModelChange",function(e){return t.sale.company_head=e}),d.Jc(18,v,2,2,"mat-option",14),d.Sb(),d.Tb(19,"mat-error"),d.Lc(20," Company Head is "),d.Tb(21,"strong"),d.Lc(22,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(23,"div",15),d.Tb(24,"mat-form-field",12),d.Tb(25,"input",16),d.dc("ngModelChange",function(e){return t.sale.bill_no=e}),d.Sb(),d.Sb(),d.Sb(),d.Tb(26,"div",15),d.Tb(27,"mat-form-field",12),d.Tb(28,"input",17),d.dc("ngModelChange",function(e){return t.sale.po_no=e}),d.Sb(),d.Sb(),d.Sb(),d.Tb(29,"div",15),d.Tb(30,"mat-form-field",12),d.Tb(31,"input",18),d.dc("ngModelChange",function(e){return t.sale.grn=e}),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(32,"div",10),d.Tb(33,"div",19),d.Tb(34,"mat-form-field",12),d.Tb(35,"input",20),d.dc("ngModelChange",function(e){return t.sale.party_name=e}),d.Sb(),d.Tb(36,"mat-error"),d.Lc(37," Party Name is "),d.Tb(38,"strong"),d.Lc(39,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(40,"div",15),d.Tb(41,"mat-form-field",12),d.Tb(42,"mat-select",21),d.dc("ngModelChange",function(e){return t.sale.pay_mode=e}),d.Jc(43,M,2,2,"mat-option",14),d.Sb(),d.Tb(44,"mat-error"),d.Tb(45,"strong"),d.Lc(46,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(47,"div",15),d.Tb(48,"mat-form-field",12),d.Tb(49,"mat-select",22),d.dc("ngModelChange",function(e){return t.sale.pay_status=e}),d.Jc(50,C,2,2,"mat-option",14),d.Sb(),d.Tb(51,"mat-error"),d.Tb(52,"strong"),d.Lc(53,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(54,"div",19),d.Tb(55,"mat-form-field",12),d.Tb(56,"input",23),d.dc("ngModelChange",function(e){return t.sale.remarks=e}),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(57,"div",10),d.Tb(58,"div",24),d.Tb(59,"mat-form-field",12),d.Tb(60,"mat-select",25),d.dc("ngModelChange",function(e){return t.selectedProduct.id=e}),d.Jc(61,L,2,2,"mat-option",14),d.Sb(),d.Tb(62,"mat-error"),d.Lc(63," Item is "),d.Tb(64,"strong"),d.Lc(65,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(66,"div",15),d.Tb(67,"mat-form-field",12),d.Tb(68,"input",26),d.dc("ngModelChange",function(e){return t.selectedProduct.quantity=e}),d.Sb(),d.Tb(69,"mat-error"),d.Lc(70," Quantity is "),d.Tb(71,"strong"),d.Lc(72,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(73,"div",15),d.Tb(74,"mat-form-field",12),d.Tb(75,"input",27),d.dc("ngModelChange",function(e){return t.selectedProduct.rate=e}),d.Sb(),d.Tb(76,"mat-error"),d.Lc(77," Rate is "),d.Tb(78,"strong"),d.Lc(79,"required"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(80,"div",15),d.Tb(81,"a",4),d.dc("click",function(){return t.AddProductToSaleItems()}),d.Lc(82," Add "),d.Sb(),d.Sb(),d.Sb(),d.Ob(83,"div",28),d.Sb(),d.Tb(84,"div",7),d.Tb(85,"div",29),d.Tb(86,"mat-table",30,31),d.Rb(88,32),d.Jc(89,A,2,0,"mat-header-cell",33),d.Jc(90,_,2,1,"mat-cell",34),d.Qb(),d.Rb(91,35),d.Jc(92,q,2,0,"mat-header-cell",33),d.Jc(93,w,2,1,"mat-cell",34),d.Qb(),d.Rb(94,36),d.Jc(95,P,2,0,"mat-header-cell",33),d.Jc(96,J,2,1,"mat-cell",34),d.Qb(),d.Rb(97,37),d.Jc(98,N,2,0,"mat-header-cell",33),d.Jc(99,R,2,1,"mat-cell",34),d.Qb(),d.Rb(100,38),d.Jc(101,I,2,0,"mat-header-cell",33),d.Jc(102,k,2,1,"mat-cell",34),d.Qb(),d.Rb(103,39),d.Jc(104,D,2,0,"mat-header-cell",33),d.Jc(105,O,2,1,"mat-cell",34),d.Qb(),d.Rb(106,40),d.Jc(107,x,2,0,"mat-header-cell",33),d.Jc(108,F,2,1,"mat-cell",34),d.Qb(),d.Rb(109,41),d.Jc(110,Q,2,0,"mat-header-cell",33),d.Jc(111,$,8,0,"mat-cell",34),d.Qb(),d.Jc(112,B,1,0,"mat-header-row",42),d.Jc(113,H,1,0,"mat-row",43),d.Sb(),d.Jc(114,j,2,0,"div",44),d.Jc(115,z,2,0,"div",44),d.Sb(),d.Tb(116,"div",45),d.Jc(117,U,1,1,"mat-spinner",46),d.Ob(118,"mat-paginator",47),d.Sb(),d.Sb(),d.Tb(119,"div",48),d.Tb(120,"div",49),d.Ob(121,"div",50),d.Tb(122,"div"),d.Lc(123," \xa0 "),d.Tb(124,"button",51),d.Lc(125," Save "),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e){const e=d.xc(10);d.Ab(13),d.oc("diameter",20),d.Ab(4),d.oc("ngModel",t.sale.company_head),d.Ab(1),d.oc("ngForOf",t.company_heads),d.Ab(7),d.oc("ngModel",t.sale.bill_no),d.Ab(3),d.oc("ngModel",t.sale.po_no),d.Ab(3),d.oc("ngModel",t.sale.grn),d.Ab(4),d.oc("ngModel",t.sale.party_name),d.Ab(7),d.oc("ngModel",t.sale.pay_mode),d.Ab(1),d.oc("ngForOf",t.pay_modes),d.Ab(6),d.oc("ngModel",t.sale.pay_status),d.Ab(1),d.oc("ngForOf",t.pay_statuses),d.Ab(6),d.oc("ngModel",t.sale.remarks),d.Ab(4),d.oc("ngModel",t.selectedProduct.id),d.Ab(1),d.oc("ngForOf",t.products),d.Ab(7),d.oc("ngModel",t.selectedProduct.quantity),d.Ab(7),d.oc("ngModel",t.selectedProduct.rate),d.Ab(11),d.oc("dataSource",t.dataSource),d.Ab(26),d.oc("matHeaderRowDef",t.displayedColumns),d.Ab(1),d.oc("matRowDefColumns",t.displayedColumns),d.Ab(1),d.oc("ngIf",t.loaded&&0==t.dataSource.data.length),d.Ab(1),d.oc("ngIf",!t.loaded&&!t.dataSource.data.length),d.Ab(2),d.oc("ngIf",!t.loaded),d.Ab(1),d.oc("pageSize",t.pageSize)("showFirstLastButtons",!0)("length",t.totalProducts),d.Ab(6),d.oc("disabled",e.invalid||e.pristine)}},directives:[r.y,r.o,r.p,p.b,h.c,g.a,r.u,r.n,r.q,n.m,h.b,r.s,f.a,r.c,s.j,s.c,s.e,s.b,s.g,s.i,n.n,S.a,b.b,T.f,s.d,s.a,b.a,y.a,s.f,s.h],styles:[""]}),e})();var K=a("93Pz"),X=a("ZOsW");let E=(()=>{class e{}return e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({factory:function(t){return new(t||e)},providers:[{provide:i.b,useValue:{hasBackdrop:!0,panelClass:"mat-dialog-container-wrapper",height:"auto",width:"900px"}}],imports:[[n.c,b.c,s.l,S.b,p.a,y.b,K.a,i.e,r.j,r.t,b.c,g.b,f.b,X.a,o.k.forChild([{path:"",component:G,children:[{path:"",pathMatch:"full"}]}])]]}),e})()}}]);