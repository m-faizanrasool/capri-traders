(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Xlj8:function(t,e,i){"use strict";i.r(e),i.d(e,"OrdersModule",function(){return Pt});var n=i("ofXK"),a=i("fXoL"),s=i("tyNb"),r=i("u47x"),o=i("GU7r"),c=i("+rOU"),l=i("FKr1"),d=i("R1ws"),b=i("XNiG"),h=(i("quSY"),i("VRyK")),u=i("xgIS"),m=i("LRne"),p=i("PqYM"),f=(i("R0Ic"),i("JX91")),g=(i("/uUt"),i("1G5W")),_=i("8LU1"),v=i("nLfN"),S=i("FtGj"),k=i("cH1L"),y=i("vxfF");const x=["*"],T=["tabListContainer"],w=["tabList"],L=["nextPaginator"],C=["previousPaginator"],A=["mat-tab-nav-bar",""],I=new a.r("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let O=(()=>{class t{constructor(t,e,i,n){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=i,this._animationMode=n}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),i=this._elementRef.nativeElement;i.style.left=e.left,i.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(a.l),a.Nb(a.A),a.Nb(I),a.Nb(d.a,8))},t.\u0275dir=a.Ib({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&a.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();const N=Object(v.f)({passive:!0});let R=(()=>{class t{constructor(t,e,i,n,s,r,o){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=i,this._dir=n,this._ngZone=s,this._platform=r,this._animationMode=o,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new b.a,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new b.a,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new a.o,this.indexFocused=new a.o,s.runOutsideAngular(()=>{Object(u.a)(t.nativeElement,"mouseleave").pipe(Object(g.a)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Object(_.f)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Object(u.a)(this._previousPaginator.nativeElement,"touchstart",N).pipe(Object(g.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Object(u.a)(this._nextPaginator.nativeElement,"touchstart",N).pipe(Object(g.a)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:Object(m.a)(null),e=this._viewportRuler.change(150),i=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new r.e(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(i):i(),Object(h.a)(t,e,this._items.changes).pipe(Object(g.a)(this._destroyed)).subscribe(()=>{Promise.resolve().then(i),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Object(g.a)(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!Object(S.o)(t))switch(t.keyCode){case S.d:case S.j:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,i=this._getLayoutDirection();e.scrollLeft="ltr"==i?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(e)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:n,offsetWidth:a}=e.elementRef.nativeElement;let s,r;"ltr"==this._getLayoutDirection()?(s=n,r=s+a):(r=this._tabList.nativeElement.offsetWidth-n,s=r-a);const o=this.scrollDistance,c=this.scrollDistance+i;s<o?this.scrollDistance-=o-s+60:r>c&&(this.scrollDistance+=r-c+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),Object(p.a)(650,100).pipe(Object(g.a)(Object(h.a)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:i}=this._scrollHeader(t);(0===i||i>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(a.l),a.Nb(a.h),a.Nb(y.d),a.Nb(k.b,8),a.Nb(a.A),a.Nb(v.a),a.Nb(d.a,8))},t.\u0275dir=a.Ib({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),D=(()=>{class t extends R{constructor(t,e,i,n,a,s,r){super(t,n,a,e,i,s,r),this._disableRipple=!1,this.color="primary"}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement.classList;e.remove("mat-background-"+this.backgroundColor),t&&e.add("mat-background-"+t),this._backgroundColor=t}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Object(_.c)(t)}_itemSelected(){}ngAfterContentInit(){this._items.changes.pipe(Object(f.a)(null),Object(g.a)(this._destroyed)).subscribe(()=>{this.updateActiveLink()}),super.ngAfterContentInit()}updateActiveLink(){if(!this._items)return;const t=this._items.toArray();for(let e=0;e<t.length;e++)if(t[e].active)return this.selectedIndex=e,void this._changeDetectorRef.markForCheck();this.selectedIndex=-1,this._inkBar.hide()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(a.l),a.Nb(k.b,8),a.Nb(a.A),a.Nb(a.h),a.Nb(y.d),a.Nb(v.a),a.Nb(d.a,8))},t.\u0275dir=a.Ib({type:t,inputs:{color:"color",backgroundColor:"backgroundColor",disableRipple:"disableRipple"},features:[a.xb]}),t})(),P=(()=>{class t extends D{constructor(t,e,i,n,a,s,r){super(t,e,i,n,a,s,r)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(a.l),a.Nb(k.b,8),a.Nb(a.A),a.Nb(a.h),a.Nb(y.d),a.Nb(v.a),a.Nb(d.a,8))},t.\u0275cmp=a.Hb({type:t,selectors:[["","mat-tab-nav-bar",""]],contentQueries:function(t,e,i){if(1&t&&a.Gb(i,B,!0),2&t){let t;a.wc(t=a.ec())&&(e._items=t)}},viewQuery:function(t,e){if(1&t&&(a.Fc(O,!0),a.Fc(T,!0),a.Fc(w,!0),a.Pc(L,!0),a.Pc(C,!0)),2&t){let t;a.wc(t=a.ec())&&(e._inkBar=t.first),a.wc(t=a.ec())&&(e._tabListContainer=t.first),a.wc(t=a.ec())&&(e._tabList=t.first),a.wc(t=a.ec())&&(e._nextPaginator=t.first),a.wc(t=a.ec())&&(e._previousPaginator=t.first)}},hostAttrs:[1,"mat-tab-nav-bar","mat-tab-header"],hostVars:10,hostBindings:function(t,e){2&t&&a.Fb("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())("mat-primary","warn"!==e.color&&"accent"!==e.color)("mat-accent","accent"===e.color)("mat-warn","warn"===e.color)},inputs:{color:"color"},exportAs:["matTabNavBar","matTabNav"],features:[a.xb],attrs:A,ngContentSelectors:x,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-link-container",3,"keydown"],["tabListContainer",""],[1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-links"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(a.nc(),a.Tb(0,"div",0,1),a.dc("click",function(){return e._handlePaginatorClick("before")})("mousedown",function(t){return e._handlePaginatorPress("before",t)})("touchend",function(){return e._stopInterval()}),a.Ob(2,"div",2),a.Sb(),a.Tb(3,"div",3,4),a.dc("keydown",function(t){return e._handleKeydown(t)}),a.Tb(5,"div",5,6),a.dc("cdkObserveContent",function(){return e._onContentChanges()}),a.Tb(7,"div",7),a.mc(8),a.Sb(),a.Ob(9,"mat-ink-bar"),a.Sb(),a.Sb(),a.Tb(10,"div",8,9),a.dc("mousedown",function(t){return e._handlePaginatorPress("after",t)})("click",function(){return e._handlePaginatorClick("after")})("touchend",function(){return e._stopInterval()}),a.Ob(12,"div",2),a.Sb()),2&t&&(a.Fb("mat-tab-header-pagination-disabled",e._disableScrollBefore),a.oc("matRippleDisabled",e._disableScrollBefore||e.disableRipple),a.Ab(5),a.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode),a.Ab(5),a.Fb("mat-tab-header-pagination-disabled",e._disableScrollAfter),a.oc("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[l.h,o.a,O],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-links{display:flex}[mat-align-tabs=center]>.mat-tab-link-container .mat-tab-links{justify-content:center}[mat-align-tabs=end]>.mat-tab-link-container .mat-tab-links{justify-content:flex-end}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-link-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent}.mat-tab-link:focus{outline:none}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-link:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-link.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-link.mat-tab-disabled{opacity:.5}.mat-tab-link .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-link{opacity:1}[mat-stretch-tabs] .mat-tab-link{flex-basis:0;flex-grow:1}.mat-tab-link.mat-tab-disabled{pointer-events:none}@media(max-width: 599px){.mat-tab-link{min-width:72px}}\n'],encapsulation:2}),t})();class M{}const F=Object(l.r)(Object(l.n)(Object(l.o)(M)));let j=(()=>{class t extends F{constructor(t,e,i,n,a,s){super(),this._tabNavBar=t,this.elementRef=e,this._focusMonitor=a,this._isActive=!1,this.rippleConfig=i||{},this.tabIndex=parseInt(n)||0,"NoopAnimations"===s&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get active(){return this._isActive}set active(t){Object(_.c)(t)!==this._isActive&&(this._isActive=t,this._tabNavBar.updateActiveLink())}get rippleDisabled(){return this.disabled||this.disableRipple||this._tabNavBar.disableRipple||!!this.rippleConfig.disabled}focus(){this.elementRef.nativeElement.focus()}ngAfterViewInit(){this._focusMonitor.monitor(this.elementRef)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.elementRef)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(D),a.Nb(a.l),a.Nb(l.d,8),a.bc("tabindex"),a.Nb(r.f),a.Nb(d.a,8))},t.\u0275dir=a.Ib({type:t,inputs:{active:"active"},features:[a.xb]}),t})(),B=(()=>{class t extends j{constructor(t,e,i,n,a,s,r,o){super(t,e,a,s,r,o),this._tabLinkRipple=new l.j(this,i,e,n),this._tabLinkRipple.setupTriggerEvents(e.nativeElement)}ngOnDestroy(){super.ngOnDestroy(),this._tabLinkRipple._removeTriggerEvents()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(P),a.Nb(a.l),a.Nb(a.A),a.Nb(v.a),a.Nb(l.d,8),a.bc("tabindex"),a.Nb(r.f),a.Nb(d.a,8))},t.\u0275dir=a.Ib({type:t,selectors:[["","mat-tab-link",""],["","matTabLink",""]],hostAttrs:[1,"mat-tab-link","mat-focus-indicator"],hostVars:7,hostBindings:function(t,e){2&t&&(a.Bb("aria-current",e.active?"page":null)("aria-disabled",e.disabled)("tabIndex",e.tabIndex),a.Fb("mat-tab-disabled",e.disabled)("mat-tab-label-active",e.active))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matTabLink"],features:[a.xb]}),t})(),E=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[n.c,l.e,c.g,l.i,o.c,r.a],l.e]}),t})();function J(t,e){if(1&t){const t=a.Ub();a.Tb(0,"a",3),a.dc("click",function(){a.Bc(t);const i=e.$implicit,n=a.hc();return n.open(i),n.activeLink=i}),a.Lc(1),a.ic(2,"titlecase"),a.Sb()}if(2&t){const t=e.$implicit,i=a.hc();a.oc("active",i.activeLink==t),a.Ab(1),a.Nc(" ",a.jc(2,2,t)," ")}}let z=(()=>{class t{constructor(t){this.router=t,this.selectedTab=0,this.links=["pending","accepted","picked","delivered","cancelled"],this.activeLink=this.links[0]}ngOnInit(){this.open(this.activeLink)}open(t){this.router.navigate(["/orders/"+t])}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.h))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-orders"]],decls:4,vars:1,consts:[[1,"card","card-custom"],["mat-tab-nav-bar","","mat-stretch-tabs",""],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"nav",1),a.Jc(2,J,3,4,"a",2),a.Sb(),a.Sb(),a.Ob(3,"router-outlet")),2&t&&(a.Ab(2),a.oc("ngForOf",e.links))},directives:[P,n.m,s.l,B],pipes:[n.x],styles:[""]}),t})();var $=i("M9IT"),H=i("+0xr"),U=i("AytR"),V=i("tk/3");let W=(()=>{class t{constructor(t){this.httpClient=t}getByStatus(t){return this.httpClient.get(`${U.a.apiUrl}orders/status/${t}`)}getOrder(t){return this.httpClient.get(`${U.a.apiUrl}orders/${t}`)}changeOrderStatus(t){return this.httpClient.post(U.a.apiUrl+"orders/status",t)}}return t.\u0275fac=function(e){return new(e||t)(a.ac(V.c))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=i("Xa2L");function K(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Name "),a.Sb())}function G(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Lc(1),a.Sb()),2&t){const t=e.$implicit;a.Ab(1),a.Nc(" ",t.customer.name," ")}}function Q(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Phone "),a.Sb())}function X(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Lc(1),a.Sb()),2&t){const t=e.$implicit;a.Ab(1),a.Nc(" ",t.customer.phone," ")}}function Z(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Address "),a.Sb())}function Y(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Lc(1),a.Sb()),2&t){const t=e.$implicit;a.Ab(1),a.Oc(" ",t.address.address," | ",t.address.rider_notes," ")}}function tt(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Purchased "),a.Sb())}function et(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Lc(1),a.Sb()),2&t){const t=e.$implicit;a.Ab(1),a.Nc(" ",t.created_at," ")}}function it(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Total "),a.Sb())}function nt(t,e){if(1&t&&(a.Tb(0,"mat-cell"),a.Lc(1),a.Sb()),2&t){const t=e.$implicit;a.Ab(1),a.Nc(" ",t.total," ")}}function at(t,e){1&t&&(a.Tb(0,"mat-header-cell"),a.Lc(1," Actions "),a.Sb())}function st(t,e){1&t&&a.Ob(0,"mat-cell")}function rt(t,e){1&t&&a.Ob(0,"mat-header-row")}function ot(t,e){if(1&t){const t=a.Ub();a.Tb(0,"mat-row",22),a.dc("click",function(){a.Bc(t);const i=e.$implicit;return a.hc(2).openOrder(i.id)}),a.Sb()}}function ct(t,e){if(1&t&&(a.Tb(0,"div",9),a.Tb(1,"mat-table",10,11),a.Rb(3,12),a.Jc(4,K,2,0,"mat-header-cell",13),a.Jc(5,G,2,1,"mat-cell",14),a.Qb(),a.Rb(6,15),a.Jc(7,Q,2,0,"mat-header-cell",13),a.Jc(8,X,2,1,"mat-cell",14),a.Qb(),a.Rb(9,16),a.Jc(10,Z,2,0,"mat-header-cell",13),a.Jc(11,Y,2,2,"mat-cell",14),a.Qb(),a.Rb(12,17),a.Jc(13,tt,2,0,"mat-header-cell",13),a.Jc(14,et,2,1,"mat-cell",14),a.Qb(),a.Rb(15,18),a.Jc(16,it,2,0,"mat-header-cell",13),a.Jc(17,nt,2,1,"mat-cell",14),a.Qb(),a.Rb(18,19),a.Jc(19,at,2,0,"mat-header-cell",13),a.Jc(20,st,1,0,"mat-cell",14),a.Qb(),a.Jc(21,rt,1,0,"mat-header-row",20),a.Jc(22,ot,1,0,"mat-row",21),a.Sb(),a.Sb()),2&t){const t=a.hc();a.Ab(1),a.oc("dataSource",t.dataSource),a.Ab(20),a.oc("matHeaderRowDef",t.displayedColumns),a.Ab(1),a.oc("matRowDefColumns",t.displayedColumns)}}function lt(t,e){1&t&&(a.Tb(0,"div",23),a.Lc(1," No records found "),a.Sb())}function dt(t,e){1&t&&(a.Tb(0,"div",23),a.Lc(1,"Please wait...."),a.Sb())}function bt(t,e){1&t&&a.Ob(0,"mat-spinner",24),2&t&&a.oc("diameter",20)}const ht=function(){return[5,10,20]};let ut=(()=>{class t{constructor(t,e,i,n){this.cdr=t,this.ordersService=e,this.router=i,this.activatedRoute=n,this.loaded=!1,this.orders=[],this.displayedColumns=["name","phone","address","purchased","total"]}ngOnInit(){this.activatedRoute.params.subscribe(t=>{t&&(this.status=t.status,this.fetchOrders())})}fetchOrders(){this.loaded=!1,this.ordersService.getByStatus(this.status).subscribe(t=>{this.orders=t.orders,this.renderOrders(),this.loaded=!0,this.cdr.detectChanges()})}renderOrders(){this.dataSource=new H.k(this.orders),this.dataSource.paginator=this.paginator}openOrder(t){this.router.navigate([`/orders/details/${this.status}/${t}`]),console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(a.h),a.Nb(W),a.Nb(s.h),a.Nb(s.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&a.Fc($.a,!0),2&t){let t;a.wc(t=a.ec())&&(e.paginator=t.first)}},inputs:{status:"status"},decls:10,vars:8,consts:[[1,"card","card-custom"],[1,"card-body"],[1,"row"],[1,"col"],["class","mat-table-wrapper",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","phone"],["matColumnDef","address"],["matColumnDef","purchased"],["matColumnDef","total"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[3,"click",4,"matRowDef","matRowDefColumns"],[3,"click"],[1,"text-center","mt-5"],[3,"diameter"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"div",3),a.Jc(4,ct,23,3,"div",4),a.Jc(5,lt,2,0,"div",5),a.Jc(6,dt,2,0,"div",5),a.Tb(7,"div",6),a.Jc(8,bt,1,1,"mat-spinner",7),a.Ob(9,"mat-paginator",8),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Ab(4),a.oc("ngIf",e.loaded),a.Ab(1),a.oc("ngIf",e.loaded&&0==e.orders.length),a.Ab(1),a.oc("ngIf",!e.loaded),a.Ab(2),a.oc("ngIf",!e.loaded),a.Ab(1),a.oc("pageSize",10)("pageSizeOptions",a.rc(7,ht))("showFirstLastButtons",!0))},directives:[n.n,$.a,H.j,H.c,H.e,H.b,H.g,H.i,H.d,H.a,H.f,H.h,q.b],styles:[""]}),t})();var mt=i("bTqV"),pt=i("93Pz");function ft(t,e,i,n){return new(i||(i=Promise))(function(a,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function o(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,o)}c((n=n.apply(t,e||[])).next())})}var gt=i("0IaG"),_t=i("3Pt+");let vt=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){this.title=this.data.title}yes(){this.dialogRef.close({confirm:!0,reason:this.reason})}no(){this.dialogRef.close({confirm:!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(gt.f),a.Nb(gt.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-cancel-order-comfirmation"]],decls:14,vars:3,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],["type","text","name","reason","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["type","submit",1,"btn","btn-secondary","mx-2",3,"click"],["type","submit",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Lc(3),a.Sb(),a.Sb(),a.Tb(4,"form"),a.Tb(5,"div",3),a.Tb(6,"label"),a.Lc(7,"Reason:"),a.Sb(),a.Tb(8,"input",4),a.dc("ngModelChange",function(t){return e.reason=t}),a.Sb(),a.Sb(),a.Tb(9,"div",5),a.Tb(10,"button",6),a.dc("click",function(){return e.no()}),a.Lc(11," Close "),a.Sb(),a.Tb(12,"button",7),a.dc("click",function(){return e.yes()}),a.Lc(13," Cancel Order "),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Ab(3),a.Mc(e.title),a.Ab(5),a.oc("ngModel",e.reason),a.Ab(4),a.oc("disabled",!e.reason))},directives:[_t.y,_t.o,_t.p,_t.c,_t.u,_t.n,_t.q],styles:[".card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),t})();var St=i("zyfY"),kt=i("K3AU"),yt=i("OlR4");function xt(t,e){1&t&&a.Ob(0,"mat-spinner",3),2&t&&a.oc("diameter",50)}function Tt(t,e){if(1&t&&(a.Tb(0,"div"),a.Tb(1,"div",11),a.Tb(2,"div",12),a.Tb(3,"div"),a.Tb(4,"h6"),a.Lc(5),a.Sb(),a.Tb(6,"p"),a.Lc(7),a.Sb(),a.Sb(),a.Sb(),a.Tb(8,"div",15),a.Tb(9,"p",16),a.Lc(10),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t){const t=e.$implicit;a.Ab(5),a.Mc(t.product.name),a.Ab(2),a.Oc(" ",t.quantity," x Rs: ",t.total_price/t.quantity," "),a.Ab(3),a.Nc("Rs: ",t.total_price,"")}}function wt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",17),a.Tb(1,"button",18),a.Lc(2),a.ic(3,"titlecase"),a.ic(4,"slice"),a.Sb(),a.Tb(5,"button",19),a.dc("click",function(){return a.Bc(t),a.hc(2).cancelOrder()}),a.Lc(6," Cancel Order "),a.Sb(),a.Sb()}if(2&t){const t=a.hc(2);a.Ab(2),a.Nc(" ",a.jc(3,1,a.lc(4,3,t.nextStatus,0,-2))," Order ")}}function Lt(t,e){if(1&t&&(a.Tb(0,"div",20),a.Tb(1,"h5"),a.Lc(2," Reason: "),a.Tb(3,"strong",21),a.Lc(4),a.Sb(),a.Sb(),a.Sb()),2&t){const t=a.hc(2);a.Ab(4),a.Mc(t.order.cancel_reason)}}function Ct(t,e){if(1&t){const t=a.Ub();a.Tb(0,"div",4),a.Tb(1,"h5",5),a.Lc(2),a.Sb(),a.Tb(3,"h6",6),a.Lc(4),a.Sb(),a.Tb(5,"p"),a.Lc(6),a.Sb(),a.Tb(7,"h6",6),a.Lc(8,"Address"),a.Sb(),a.Tb(9,"p"),a.Lc(10),a.Ob(11,"br"),a.Lc(12),a.Sb(),a.Tb(13,"div",7),a.Tb(14,"form",8),a.dc("ngSubmit",function(){return a.Bc(t),a.hc().onSubmit()}),a.Tb(15,"h4"),a.Lc(16,"Billing Information"),a.Sb(),a.Tb(17,"h6"),a.Lc(18,"Items List"),a.Sb(),a.Tb(19,"div",9),a.Jc(20,Tt,11,4,"div",10),a.Tb(21,"div",11),a.Tb(22,"div",12),a.Lc(23,"Subtotal"),a.Sb(),a.Tb(24,"div",12),a.Lc(25),a.Sb(),a.Sb(),a.Tb(26,"div",11),a.Tb(27,"div",12),a.Lc(28,"Discount"),a.Sb(),a.Tb(29,"div",12),a.Lc(30),a.Sb(),a.Sb(),a.Tb(31,"div",11),a.Tb(32,"div",12),a.Lc(33,"Delivery Fee"),a.Sb(),a.Tb(34,"div",12),a.Lc(35),a.Sb(),a.Sb(),a.Tb(36,"div",11),a.Tb(37,"div",12),a.Tb(38,"strong"),a.Lc(39,"Total"),a.Sb(),a.Sb(),a.Tb(40,"div",12),a.Tb(41,"strong"),a.Lc(42),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Jc(43,wt,7,7,"div",13),a.Sb(),a.Sb(),a.Jc(44,Lt,5,1,"div",14),a.Sb()}if(2&t){const t=a.hc();a.Ab(2),a.Nc("Order # ",t.order.hash,""),a.Ab(2),a.Mc(t.order.customer.name),a.Ab(2),a.Mc(t.order.customer.phone),a.Ab(4),a.Mc(t.order.address.address),a.Ab(2),a.Mc(t.order.address.rider_notes),a.Ab(8),a.oc("ngForOf",t.order.items),a.Ab(5),a.Nc("Rs: ",t.order.subtotal,""),a.Ab(5),a.Nc("Rs: ",t.order.discount,""),a.Ab(5),a.Nc("Rs: ",t.order.delivery_charges,""),a.Ab(7),a.Nc("Rs: ",t.order.total,""),a.Ab(1),a.oc("ngIf","cancelled"!==t.order.status.key&&"delivered"!==t.order.status.key),a.Ab(1),a.oc("ngIf",t.order.cancel_reason)}}let At=(()=>{class t{constructor(t,e,i,n,a,s,r){this.activatedRoute=t,this.changeDetectorRef=e,this.orderService=i,this.subheaderService=n,this.commonService=a,this.location=s,this.dialog=r,this.productsVendors=[],this.riders=[],this.loaded=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>ft(this,void 0,void 0,function*(){t&&(this.status=t.status,this.orderId=t.id,this.init(),this.setNextStatus(),yield this.fetchOrder())}))}init(){this.subheaderService.setBreadcrumbs([{title:"Orders",linkPath:"orders/"+this.status,linkText:"Orders"}])}setNextStatus(){switch(this.status){case"pending":this.nextStatus="accepted";break;case"accepted":this.nextStatus="picked";break;case"picked":this.nextStatus="delivered"}}productVendors(t){return this.productsVendors.find(e=>e.id===t).vendors}fetchOrder(){return ft(this,void 0,void 0,function*(){yield this.orderService.getOrder(this.orderId).toPromise().then(t=>{this.order=t.order,this.productsVendors=t.products_vendors,this.riders=t.riders,this.changeDetectorRef.markForCheck(),this.loaded=!0})})}onSubmit(){this.dialog.open(St.a,{data:{title:"Order "+this.nextStatus.replace(/^./,this.nextStatus[0].toUpperCase()),message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(t=>{t&&t.confirm&&this.orderService.changeOrderStatus({order_id:this.orderId,status:this.nextStatus}).subscribe(t=>{this.commonService.openSnackBar(t.message,2e3),this.location.back()})})}cancelOrder(){this.dialog.open(vt,{data:{title:"Cancel order",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(t=>{t&&t.confirm&&this.orderService.changeOrderStatus({order_id:this.orderId,status:"cancelled",reason:t.reason}).subscribe(t=>{this.commonService.openSnackBar(t.message,2e3),this.location.back()})})}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(s.a),a.Nb(a.h),a.Nb(W),a.Nb(kt.a),a.Nb(yt.a),a.Nb(n.j),a.Nb(gt.c))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-details"]],decls:3,vars:2,consts:[[1,"card","card-custom"],["class","spinner-center",3,"diameter",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"spinner-center",3,"diameter"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"example-preview"],[1,"example-container",3,"ngSubmit"],[1,"billing-information"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-3"],["class","my-3",4,"ngIf"],["class","mt-5",4,"ngIf"],[1,"col-3","d-flex","align-items-center"],["slot","end"],[1,"my-3"],["type","submit","color","primary","mat-raised-button",""],["type","button","color","warn","mat-raised-button","",1,"ml-2",3,"click"],[1,"mt-5"],[1,"text-danger","mt-5"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Jc(1,xt,1,1,"mat-spinner",1),a.Jc(2,Ct,45,12,"div",2),a.Sb()),2&t&&(a.Ab(1),a.oc("ngIf",!e.loaded),a.Ab(1),a.oc("ngIf",e.loaded))},directives:[n.n,q.b,_t.y,_t.o,_t.p,n.m,mt.b],pipes:[n.x,n.w],styles:[".spinner-center[_ngcontent-%COMP%]{margin:40px auto}"]}),t})();var It=i("kmnG"),Ot=i("qFsG"),Nt=i("NFeN");let Rt=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[l.e],l.e]}),t})();var Dt=i("d3UM");let Pt=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[n.c,pt.a,mt.c,H.l,$.b,It.e,Ot.b,q.a,E,Nt.b,Rt,Dt.b,_t.j,_t.t,s.k.forChild([{path:"",component:z,children:[{path:"details/:status/:id",component:At},{path:":status",component:ut}]}])]]}),t})()}}]);