{"version":3,"sources":["webpack:///src/app/pages/products/list/add-product-dialog/add-product-dialog.component.ts","webpack:///src/app/pages/products/list/add-product-dialog/add-product-dialog.component.html","webpack:///src/app/services/products.service.ts"],"names":["AddProductDialogComponent","dialogRef","data","fb","productsService","commonService","product","brand_id","name","description","purchase_price","sale_price","unit_id","unit_quantity","discount","order","viewLoading","imageChangedEvent","croppedImage","brands","paramsData","units","mode","id","event","image","base64","image_url","disabled","updateProduct","pipe","subscribe","message","openSnackBar","close","error","addProduct","onSubmit","fileChangeEvent","selector","templateUrl","styleUrls","ProductsService","httpClient","queryParams","queryParamsString","fromObject","toString","get","apiUrl","post","patch","providedIn"],"mappings":"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","file":"default~products-products-module~purchases-purchases-module~sales-sales-module-es5.js","sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ImageCroppedEvent } from 'ngx-image-cropper';\r\nimport { finalize } from 'rxjs/operators';\r\nimport { CommonService } from 'src/app/services/common.service';\r\nimport { ProductsService } from 'src/app/services/products.service';\r\n\r\n@Component({\r\n\tselector: 'app-add-product-dialog',\r\n\ttemplateUrl: './add-product-dialog.component.html',\r\n\tstyleUrls: ['./add-product-dialog.component.scss'],\r\n})\r\nexport class AddProductDialogComponent implements OnInit {\r\n\tproduct: any = {\r\n\t\tbrand_id: '',\r\n\t\tname: '',\r\n\t\tdescription: '',\r\n\t\tpurchase_price: '',\r\n\t\tsale_price: '',\r\n\t\tunit_id: '',\r\n\t\tunit_quantity: '',\r\n\t\tdiscount: '',\r\n\t\torder: '',\r\n\t};\r\n\tproductForm: FormGroup;\r\n\r\n\tbrands: any[];\r\n\tunits: any[];\r\n\tmode: string;\r\n\tdisabled: boolean;\r\n\r\n\tviewLoading = true;\r\n\r\n\terrorMessage: string;\r\n\r\n\timageChangedEvent: any = '';\r\n\tcroppedImage: any = '';\r\n\r\n\tconstructor(\r\n\t\tpublic dialogRef: MatDialogRef<AddProductDialogComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\tprivate fb: FormBuilder,\r\n\t\tprivate productsService: ProductsService,\r\n\t\tprivate commonService: CommonService\r\n\t) {}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.brands = this.data.paramsData.brands;\r\n\t\tthis.units = this.data.paramsData.units;\r\n\r\n\t\tif (this.data.product) {\r\n\t\t\tthis.product = { ...this.data.product };\r\n\t\t\tthis.mode = 'edit';\r\n\t\t}\r\n\t\tthis.viewLoading = false;\r\n\t}\r\n\r\n\tgetTitle(): string {\r\n\t\tif (this.product.id) {\r\n\t\t\treturn `Edit Product '${this.product.name}'`;\r\n\t\t}\r\n\r\n\t\treturn 'New Product';\r\n\t}\r\n\r\n\tfileChangeEvent(event: any): void {\r\n\t\tthis.imageChangedEvent = event;\r\n\t\tthis.product.image = '';\r\n\t}\r\n\timageCropped(event: ImageCroppedEvent) {\r\n\t\tthis.product.image = event.base64;\r\n\t\tthis.product.image_url = event.base64;\r\n\t}\r\n\r\n\timageChanged() {\r\n\t\tthis.product.image = '';\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\tthis.disabled = true;\r\n\t\tif (this.mode === 'edit') {\r\n\t\t\tthis.productsService\r\n\t\t\t\t.updateProduct(this.product)\r\n\t\t\t\t.pipe(finalize(() => (this.disabled = false)))\r\n\t\t\t\t.subscribe(\r\n\t\t\t\t\t({ message }: any) => {\r\n\t\t\t\t\t\tthis.commonService.openSnackBar(message);\r\n\t\t\t\t\t\tthis.dialogRef.close(message);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t({ error }) => {\r\n\t\t\t\t\t\tthis.commonService.openSnackBar(error.message, 4000);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.productsService\r\n\t\t\t\t.addProduct(this.product)\r\n\t\t\t\t.pipe(finalize(() => (this.disabled = false)))\r\n\t\t\t\t.subscribe(\r\n\t\t\t\t\t({ message }: any) => {\r\n\t\t\t\t\t\tthis.commonService.openSnackBar(message);\r\n\t\t\t\t\t\tthis.dialogRef.close(message);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t({ error }) => {\r\n\t\t\t\t\t\tthis.commonService.openSnackBar(error.message, 4000);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n","<div\r\n\tclass=\"card card-custom\"\r\n\t[ngClass]=\"{ 'card-body-progress card-body-progress-overlay': viewLoading }\"\r\n>\r\n\t<div class=\"card-header\">\r\n\t\t<div class=\"card-title\">\r\n\t\t\t<h3 class=\"card-label\">{{ getTitle() }}</h3>\r\n\t\t</div>\r\n\t</div>\r\n\t<form class=\"form\" (ngSubmit)=\"onSubmit()\" #f=\"ngForm\">\r\n\t\t<div class=\"card-body\">\r\n\t\t\t<div class=\"card-body-progress\">\r\n\t\t\t\t<mat-spinner [diameter]=\"20\"></mat-spinner>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<mat-select\r\n\t\t\t\t\t\t\tplaceholder=\"Select Brand\"\r\n\t\t\t\t\t\t\tname=\"brand\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.brand_id\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<mat-option *ngFor=\"let brand of brands\" [value]=\"brand.id\">\r\n\t\t\t\t\t\t\t\t{{ brand.name }}\r\n\t\t\t\t\t\t\t</mat-option>\r\n\t\t\t\t\t\t</mat-select>\r\n\t\t\t\t\t\t<mat-error\r\n\t\t\t\t\t\t\t>Brand is\r\n\t\t\t\t\t\t\t<strong>required</strong>\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\tplaceholder=\"Name\"\r\n\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.name\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<mat-error>\r\n\t\t\t\t\t\t\tName is\r\n\t\t\t\t\t\t\t<strong>required</strong>\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\tplaceholder=\"Descrpition\"\r\n\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t#description\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.description\"\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t<mat-hint align=\"end\">\r\n\t\t\t\t\t\t\t{{ description.value.length }} / 400\r\n\t\t\t\t\t\t</mat-hint>\r\n\t\t\t\t\t\t<mat-error>\r\n\t\t\t\t\t\t\tDescription is\r\n\t\t\t\t\t\t\t<strong>required</strong>\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"separator separator-dashed my-6\"></div>\r\n\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<span matPrefix>Rs: &nbsp;</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Purchase Price\"\r\n\t\t\t\t\t\t\tname=\"purchase_price\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.purchase_price\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<span matPrefix>Rs: &nbsp;</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Sale Price\"\r\n\t\t\t\t\t\t\tname=\"sale_price\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.sale_price\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<span matPrefix>Rs: &nbsp;</span>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Discount\"\r\n\t\t\t\t\t\t\tname=\"discount\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.discount\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"separator separator-dashed my-6\"></div>\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<mat-select\r\n\t\t\t\t\t\t\tplaceholder=\"Select Unit\"\r\n\t\t\t\t\t\t\tname=\"unit\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.unit_id\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<mat-option *ngFor=\"let unit of units\" [value]=\"unit.id\">\r\n\t\t\t\t\t\t\t\t{{ unit.name }}\r\n\t\t\t\t\t\t\t</mat-option>\r\n\t\t\t\t\t\t</mat-select>\r\n\t\t\t\t\t\t<mat-error>\r\n\t\t\t\t\t\t\tUnit is\r\n\t\t\t\t\t\t\t<strong>required</strong>\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<mat-form-field class=\"mat-form-field-fluid\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tmatInput\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tplaceholder=\"Unit Quantity\"\r\n\t\t\t\t\t\t\tname=\"unit_quantity\"\r\n\t\t\t\t\t\t\t[(ngModel)]=\"product.unit_quantity\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<mat-error>\r\n\t\t\t\t\t\t\tUnit Quantity is\r\n\t\t\t\t\t\t\t<strong>required</strong>\r\n\t\t\t\t\t\t</mat-error>\r\n\t\t\t\t\t</mat-form-field>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"separator separator-dashed my-6\"></div>\r\n\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<div class=\"col-lg-4 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<input type=\"file\" (change)=\"fileChangeEvent($event)\" name=\"image\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"separator separator-dashed my-6\"></div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclass=\"row images\"\r\n\t\t\t\t*ngIf=\"product.image || product.image_url || imageChangedEvent\"\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"col-lg-6 kt-margin-bottom-20-mobile\"\r\n\t\t\t\t\t*ngIf=\"imageChangedEvent\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<h3 *ngIf=\"imageChangedEvent\">Selected Image:</h3>\r\n\t\t\t\t\t<image-cropper\r\n\t\t\t\t\t\t[imageChangedEvent]=\"imageChangedEvent\"\r\n\t\t\t\t\t\t[maintainAspectRatio]=\"true\"\r\n\t\t\t\t\t\t[aspectRatio]=\"4 / 2\"\r\n\t\t\t\t\t\t[cropperMinWidth]=\"200\"\r\n\t\t\t\t\t\t[imageQuality]=\"60\"\r\n\t\t\t\t\t\t[resizeToWidth]=\"600\"\r\n\t\t\t\t\t\tformat=\"jpeg\"\r\n\t\t\t\t\t\t(imageCropped)=\"imageCropped($event)\"\r\n\t\t\t\t\t></image-cropper>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-lg-6 kt-margin-bottom-20-mobile\">\r\n\t\t\t\t\t<h3>{{ imageChangedEvent ? 'Cropped Image:' : 'Product' }}</h3>\r\n\t\t\t\t\t<div class=\"imagePreview\" *ngIf=\"product.image\">\r\n\t\t\t\t\t\t<img [src]=\"product.image\" class=\"img-fluid\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"imagePreview\" *ngIf=\"product.image_url && !product.image\">\r\n\t\t\t\t\t\t<img [src]=\"product.image_url\" class=\"img-fluid\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"card-footer\">\r\n\t\t\t<div class=\"d-flex justify-content-between\">\r\n\t\t\t\t<div class=\"mr-2\"></div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tmat-raised-button\r\n\t\t\t\t\t\tmat-dialog-close\r\n\t\t\t\t\t\tcdkFocusInitial\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancel</button\r\n\t\t\t\t\t>&nbsp;\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tmat-raised-button\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t(click)=\"onSubmit()\"\r\n\t\t\t\t\t\t[disabled]=\"\r\n\t\t\t\t\t\t\tviewLoading ||\r\n\t\t\t\t\t\t\tf.invalid ||\r\n\t\t\t\t\t\t\t(f.pristine && !product.image) ||\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root',\r\n})\r\nexport class ProductsService {\r\n\tconstructor(private httpClient: HttpClient) {}\r\n\r\n\tgetProducts(queryParams) {\r\n\t\tconst queryParamsString = new HttpParams({\r\n\t\t\tfromObject: queryParams,\r\n\t\t}).toString();\r\n\r\n\t\treturn this.httpClient.get(\r\n\t\t\tenvironment.apiUrl + 'filtered-products?' + queryParamsString\r\n\t\t);\r\n\t}\r\n\r\n\tgetAllProducts() {\r\n\t\treturn this.httpClient.get(environment.apiUrl + 'all-products');\r\n\t}\r\n\r\n\tgetCreateProductParams() {\r\n\t\treturn this.httpClient.get(environment.apiUrl + 'products/create');\r\n\t}\r\n\r\n\taddProduct(product) {\r\n\t\treturn this.httpClient.post(`${environment.apiUrl}products`, product);\r\n\t}\r\n\r\n\tupdateProduct(product) {\r\n\t\treturn this.httpClient.patch(\r\n\t\t\t`${environment.apiUrl}products/` + product.id,\r\n\t\t\tproduct\r\n\t\t);\r\n\t}\r\n\r\n\ttoggle_visibility(id) {\r\n\t\treturn this.httpClient.post(\r\n\t\t\t`${environment.apiUrl}products/toggle-visibility`,\r\n\t\t\t{\r\n\t\t\t\tid,\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tdeleteProduct(id) {\r\n\t\treturn this.httpClient.delete(`${environment.apiUrl}products/` + id);\r\n\t}\r\n}\r\n\r\nexport interface ProductQuery {\r\n\tpage_index: number;\r\n\titems_per_page: number;\r\n\tsearch?: string;\r\n\tcategories?: string;\r\n\tbrands?: string;\r\n}\r\n"]}