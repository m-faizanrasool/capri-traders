!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function a(e,a,t){return a&&n(e.prototype,a),t&&n(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{aZ8X:function(n,t,i){"use strict";i.r(t),i.d(t,"BannersModule",function(){return X});var r=i("ofXK"),c=i("M9IT"),o=i("+0xr"),b=i("0IaG"),s=i("fXoL"),d=i("3Pt+"),l=i("bTqV"),u=i("rIor");function m(e,n){1&e&&(s.Tb(0,"h3"),s.Lc(1,"Selected Image:"),s.Sb())}function f(e,n){if(1&e){var a=s.Ub();s.Tb(0,"div",16),s.Jc(1,m,2,0,"h3",18),s.Tb(2,"image-cropper",19),s.dc("imageCropped",function(e){return s.Bc(a),s.hc(2).imageCropped(e)}),s.Sb(),s.Sb()}if(2&e){var t=s.hc(2);s.Ab(1),s.oc("ngIf",t.imageChangedEvent),s.Ab(1),s.oc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",2)("cropperMinWidth",200)}}function g(e,n){if(1&e&&(s.Tb(0,"div",20),s.Ob(1,"img",21),s.Sb()),2&e){var a=s.hc(2);s.Ab(1),s.oc("src",a.banner.image,s.Cc)}}function p(e,n){if(1&e&&(s.Tb(0,"div",20),s.Ob(1,"img",21),s.Sb()),2&e){var a=s.hc(2);s.Ab(1),s.oc("src",a.banner.image_url,s.Cc)}}function h(e,n){if(1&e&&(s.Tb(0,"div",14),s.Jc(1,f,3,5,"div",15),s.Tb(2,"div",16),s.Tb(3,"h3"),s.Lc(4),s.Sb(),s.Jc(5,g,2,1,"div",17),s.Jc(6,p,2,1,"div",17),s.Sb(),s.Sb()),2&e){var a=s.hc();s.Ab(1),s.oc("ngIf",a.imageChangedEvent),s.Ab(3),s.Mc(a.imageChangedEvent?"Cropped Image:":"banner"),s.Ab(1),s.oc("ngIf",a.banner.image),s.Ab(1),s.oc("ngIf",a.banner.image_url&&!a.banner.image)}}var v,S,C=((v=function(){function n(a,t){e(this,n),this.dialogRef=a,this.data=t,this.banner={},this.imageChangedEvent="",this.croppedImage=""}return a(n,[{key:"ngOnInit",value:function(){this.data&&this.data.banner?(this.banner=this.data.banner,this.title="Update banner",this.mode="Update"):(this.title="Add banner",this.mode="Add")}},{key:"fileChangeEvent",value:function(e){this.imageChangedEvent=e,this.banner.image=""}},{key:"imageCropped",value:function(e){this.banner.image=e.base64,this.banner.image_url=e.base64}},{key:"imageChanged",value:function(){this.banner.image=""}},{key:"onSubmit",value:function(){this.dialogRef.close({banner:this.banner,isEdit:!1})}}]),n}()).\u0275fac=function(e){return new(e||v)(s.Nb(b.f),s.Nb(b.a))},v.\u0275cmp=s.Hb({type:v,selectors:[["app-add"]],decls:18,vars:4,consts:[[3,"ngSubmit"],["f","ngForm"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-group","row"],[1,"col-lg-4","kt-margin-bottom-20-mobile"],["type","file","name","image",3,"change"],[1,"separator","separator-dashed","my-6"],["class","row images",4,"ngIf"],[1,"card-footer"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","submit","color","primary","mat-raised-button","",1,"mr-2",3,"disabled"],[1,"row","images"],["class","col-lg-6 kt-margin-bottom-20-mobile",4,"ngIf"],[1,"col-lg-6","kt-margin-bottom-20-mobile"],["class","imagePreview",4,"ngIf"],[4,"ngIf"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview"],[1,"img-fluid",3,"src"]],template:function(e,n){if(1&e&&(s.Tb(0,"form",0,1),s.dc("ngSubmit",function(){return n.onSubmit()}),s.Tb(2,"div",2),s.Tb(3,"div",3),s.Tb(4,"div",4),s.Lc(5),s.Sb(),s.Sb(),s.Tb(6,"div",5),s.Tb(7,"div",6),s.Tb(8,"div",7),s.Tb(9,"input",8),s.dc("change",function(e){return n.fileChangeEvent(e)}),s.Sb(),s.Sb(),s.Sb(),s.Ob(10,"div",9),s.Jc(11,h,7,4,"div",10),s.Sb(),s.Tb(12,"div",11),s.Tb(13,"button",12),s.Lc(14," Cancel"),s.Sb(),s.Lc(15,"\xa0 "),s.Tb(16,"button",13),s.Lc(17),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e){var a=s.xc(1);s.Ab(5),s.Mc(n.title),s.Ab(6),s.oc("ngIf",n.banner.image||n.banner.image_url||n.imageChangedEvent),s.Ab(5),s.oc("disabled",a.invalid||a.pristine&&!n.banner.image),s.Ab(1),s.Nc(" ",n.mode," ")}},directives:[d.y,d.o,d.p,r.n,l.b,b.d,u.a],styles:[".card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),v),y=i("zyfY"),T=i("AytR"),w=i("tk/3"),k=((S=function(){function n(a){e(this,n),this.httpClient=a}return a(n,[{key:"getBanners",value:function(){return this.httpClient.get(T.a.apiUrl+"banners")}},{key:"addBanner",value:function(e){return this.httpClient.post(T.a.apiUrl+"banners",e)}},{key:"updateBanner",value:function(e){return this.httpClient.patch(T.a.apiUrl+"banners/"+e.id,e)}},{key:"deleteBanner",value:function(e){return this.httpClient.delete(T.a.apiUrl+"banners/"+e)}}]),n}()).\u0275fac=function(e){return new(e||S)(s.ac(w.c))},S.\u0275prov=s.Jb({token:S,factory:S.\u0275fac,providedIn:"root"}),S),B=i("OlR4"),A=i("NFeN"),I=i("Xa2L");function L(e,n){1&e&&(s.Tb(0,"mat-header-cell"),s.Lc(1," Image "),s.Sb())}function J(e,n){if(1&e&&(s.Tb(0,"mat-cell"),s.Ob(1,"img",19),s.Sb()),2&e){var a=n.$implicit;s.Ab(1),s.oc("src",a.image_url,s.Cc)}}function O(e,n){1&e&&(s.Tb(0,"mat-header-cell"),s.Lc(1," Actions "),s.Sb())}function R(e,n){if(1&e){var a=s.Ub();s.Tb(0,"mat-cell"),s.Tb(1,"button",20),s.dc("click",function(){s.Bc(a);var e=n.$implicit;return s.hc().editBanner(e)}),s.Tb(2,"mat-icon"),s.Lc(3,"create"),s.Sb(),s.Sb(),s.Lc(4,"\xa0 "),s.Tb(5,"button",21),s.dc("click",function(){s.Bc(a);var e=n.$implicit,t=n.index;return s.hc().deleteBanner(e.id,t)}),s.Tb(6,"mat-icon"),s.Lc(7,"delete"),s.Sb(),s.Sb(),s.Sb()}}function E(e,n){1&e&&s.Ob(0,"mat-header-row")}function D(e,n){1&e&&s.Ob(0,"mat-row")}function N(e,n){1&e&&(s.Tb(0,"div",22),s.Lc(1," No records found "),s.Sb())}function M(e,n){1&e&&(s.Tb(0,"div",22),s.Lc(1,"Please wait...."),s.Sb())}function P(e,n){1&e&&s.Ob(0,"mat-spinner",23),2&e&&s.oc("diameter",20)}var x,U,_=function(){return[5,10,20]},z=((x=function(){function n(a,t,i,r){e(this,n),this.bannersService=a,this.commonService=t,this.cdr=i,this.dialog=r,this.displayedColumns=["image","actions"],this.banners=[],this.loaded=!1}return a(n,[{key:"ngOnInit",value:function(){var e=this;this.bannersService.getBanners().subscribe(function(n){e.banners=n.banners,e.renderBanners(),e.loaded=!0,e.cdr.detectChanges()})}},{key:"addBanner",value:function(){var e=this;this.dialog.open(C,{width:"440px",disableClose:!0}).afterClosed().subscribe(function(n){n&&e.bannersService.addBanner(n.banner).subscribe(function(n){e.banners.push(n.banner),e.commonService.openSnackBar(n.message),e.renderBanners()},function(n){var a=n.error;e.commonService.openSnackBar(a.message,4e3)})})}},{key:"renderBanners",value:function(){this.dataSource=new o.k(this.banners),this.dataSource.paginator=this.paginator}},{key:"editBanner",value:function(e){var n=this;this.dialog.open(C,{data:{banner:e},width:"440px",disableClose:!0}).afterClosed().subscribe(function(a){a&&n.bannersService.updateBanner(a.banner).subscribe(function(t){e=a.banner,n.commonService.openSnackBar(t.message),n.renderBanners()},function(e){var a=e.error;n.commonService.openSnackBar(a.message,4e3)})})}},{key:"deleteBanner",value:function(e,n){var a=this;this.dialog.open(y.a,{data:{title:"Delete banner",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(function(t){t&&t.confirm&&a.bannersService.deleteBanner(e).subscribe(function(e){a.banners.splice(n,1),a.renderBanners(),a.commonService.openSnackBar(e.message)},function(e){var n=e.error;a.commonService.openSnackBar(n.message,4e3)})})}}]),n}()).\u0275fac=function(e){return new(e||x)(s.Nb(k),s.Nb(B.a),s.Nb(s.h),s.Nb(b.c))},x.\u0275cmp=s.Hb({type:x,selectors:[["app-banners"]],viewQuery:function(e,n){var a;1&e&&s.Fc(c.a,!0),2&e&&s.wc(a=s.ec())&&(n.paginator=a.first)},decls:25,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","image"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],[1,"img-fluid","w-25",3,"src"],["mat-icon-button","","color","primary","matTooltip","Edit user",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete user","type","button",3,"click"],[1,"mat-table-message"],[3,"diameter"]],template:function(e,n){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Tb(3,"h3"),s.Lc(4,"Banners"),s.Sb(),s.Sb(),s.Tb(5,"div",3),s.Tb(6,"button",4),s.dc("click",function(){return n.addBanner()}),s.Lc(7,"Add Banners"),s.Sb(),s.Sb(),s.Sb(),s.Tb(8,"div",5),s.Tb(9,"div",6),s.Tb(10,"mat-table",7,8),s.Rb(12,9),s.Jc(13,L,2,0,"mat-header-cell",10),s.Jc(14,J,2,1,"mat-cell",11),s.Qb(),s.Rb(15,12),s.Jc(16,O,2,0,"mat-header-cell",10),s.Jc(17,R,8,0,"mat-cell",11),s.Qb(),s.Jc(18,E,1,0,"mat-header-row",13),s.Jc(19,D,1,0,"mat-row",14),s.Sb(),s.Jc(20,N,2,0,"div",15),s.Jc(21,M,2,0,"div",15),s.Sb(),s.Tb(22,"div",16),s.Jc(23,P,1,1,"mat-spinner",17),s.Ob(24,"mat-paginator",18),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(10),s.oc("dataSource",n.dataSource),s.Ab(8),s.oc("matHeaderRowDef",n.displayedColumns),s.Ab(1),s.oc("matRowDefColumns",n.displayedColumns),s.Ab(1),s.oc("ngIf",n.loaded&&0==n.banners.length),s.Ab(1),s.oc("ngIf",!n.loaded),s.Ab(2),s.oc("ngIf",!n.loaded),s.Ab(1),s.oc("pageSize",10)("pageSizeOptions",s.rc(9,_))("showFirstLastButtons",!0))},directives:[o.j,o.c,o.e,o.b,o.g,o.i,r.n,c.a,o.d,o.a,l.b,A.a,o.f,o.h,I.b],styles:[".mat-table-wrapper[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{min-width:800px;width:100%}"]}),x),F=i("tyNb"),j=i("kmnG"),H=i("93Pz"),X=((U=function n(){e(this,n)}).\u0275mod=s.Lb({type:U}),U.\u0275inj=s.Kb({factory:function(e){return new(e||U)},imports:[[r.c,H.a,l.c,o.l,c.b,A.b,I.a,d.j,j.e,b.e,u.b,F.k.forChild([{path:"",component:z}])]]}),U)}}])}();