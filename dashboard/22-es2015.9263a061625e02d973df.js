(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"+P1L":function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",function(){return ye});var a=i("ofXK"),s=i("3Pt+"),n=i("M9IT"),r=i("JX91"),o=i("eIep"),l=i("Kj3r"),c=i("VRyK"),d=i("zyfY"),b=i("0IaG"),m=i("nYR2"),h=i("fXoL"),g=i("tk/3"),u=i("AytR");let p=(()=>{class e{constructor(e){this.httpClient=e}getUsers(e){const t=new g.e({fromObject:e}).toString();return this.httpClient.get(u.a.apiUrl+"users?"+t)}getCreateUserParams(){return this.httpClient.get(u.a.apiUrl+"users/create")}addUser(e){return this.httpClient.post(u.a.apiUrl+"users",e)}updateUser(e){return this.httpClient.patch(u.a.apiUrl+"users/"+e.id,e)}deleteUser(e){return this.httpClient.delete(u.a.apiUrl+"users/"+e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(g.c))},e.\u0275prov=h.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=i("OlR4"),S=i("Xa2L"),v=i("kmnG"),T=i("d3UM"),C=i("qFsG"),y=i("bTqV"),w=i("FKr1"),k=i("GU7r"),x=i("8LU1"),L=i("R1ws"),_=i("u47x");const A=["thumbContainer"],R=["toggleBar"],I=["input"],U=function(){return{enterDuration:150}},O=["*"],M=new h.r("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let N=0;const P={provide:s.l,useExisting:Object(h.U)(()=>j),multi:!0};class q{constructor(e,t){this.source=e,this.checked=t}}class D{constructor(e){this._elementRef=e}}const J=Object(w.r)(Object(w.m)(Object(w.n)(Object(w.o)(D)),"accent"));let j=(()=>{class e extends J{constructor(e,t,i,a,s,n){super(e),this._focusMonitor=t,this._changeDetectorRef=i,this.defaults=s,this._animationMode=n,this._onChange=e=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++N,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new h.o,this.toggleChange=new h.o,this.tabIndex=parseInt(a)||0}get required(){return this._required}set required(e){this._required=Object(x.c)(e)}get checked(){return this._checked}set checked(e){this._checked=Object(x.c)(e),this._changeDetectorRef.markForCheck()}get inputId(){return(this.id||this._uniqueId)+"-input"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._inputElement.nativeElement.focus():e||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}focus(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new q(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(h.Nb(h.l),h.Nb(_.f),h.Nb(h.h),h.bc("tabindex"),h.Nb(M),h.Nb(L.a,8))},e.\u0275cmp=h.Hb({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){if(1&e&&(h.Pc(A,!0),h.Pc(R,!0),h.Pc(I,!0)),2&e){let e;h.wc(e=h.ec())&&(t._thumbEl=e.first),h.wc(e=h.ec())&&(t._thumbBarEl=e.first),h.wc(e=h.ec())&&(t._inputElement=e.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(h.Wb("id",t.id),h.Bb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),h.Fb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[h.zb([P]),h.xb],ngContentSelectors:O,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(h.nc(),h.Tb(0,"label",0,1),h.Tb(2,"div",2,3),h.Tb(4,"input",4,5),h.dc("change",function(e){return t._onChangeEvent(e)})("click",function(e){return t._onInputClick(e)}),h.Sb(),h.Tb(6,"div",6,7),h.Ob(8,"div",8),h.Tb(9,"div",9),h.Ob(10,"div",10),h.Sb(),h.Sb(),h.Sb(),h.Tb(11,"span",11,12),h.dc("cdkObserveContent",function(){return t._onLabelTextChange()}),h.Tb(13,"span",13),h.Lc(14,"\xa0"),h.Sb(),h.mc(15),h.Sb(),h.Sb()),2&e){const e=h.xc(1),i=h.xc(12);h.Bb("for",t.inputId),h.Ab(2),h.Fb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),h.Ab(2),h.oc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),h.Bb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),h.Ab(5),h.oc("matRippleTrigger",e)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",h.rc(17,U))}},directives:[w.h,k.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),e})(),B=(()=>{class e{}return e.\u0275mod=h.Lb({type:e}),e.\u0275inj=h.Kb({factory:function(t){return new(t||e)}}),e})(),E=(()=>{class e{}return e.\u0275mod=h.Lb({type:e}),e.\u0275inj=h.Kb({factory:function(t){return new(t||e)},imports:[[B,w.i,w.e,k.c],B,w.e]}),e})();function F(e,t){if(1&e&&(h.Tb(0,"mat-option",24),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.oc("value",e.id),h.Ab(1),h.Nc(" ",e.name," ")}}function $(e,t){if(1&e&&(h.Tb(0,"mat-option",24),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.oc("value",e.value),h.Ab(1),h.Nc(" ",e.name," ")}}function z(e,t){if(1&e){const e=h.Ub();h.Tb(0,"div",10),h.Tb(1,"mat-form-field",11),h.Tb(2,"mat-select",25),h.dc("ngModelChange",function(t){return h.Bc(e),h.hc().user.allowed_access=t}),h.Jc(3,$,2,2,"mat-option",13),h.Sb(),h.Tb(4,"mat-error"),h.Tb(5,"strong"),h.Lc(6,"required"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){const e=h.hc();h.Ab(2),h.oc("ngModel",e.user.allowed_access),h.Ab(1),h.oc("ngForOf",e.pages)}}function Q(e,t){if(1&e){const e=h.Ub();h.Tb(0,"div",26),h.Tb(1,"span",27),h.Lc(2,"Change Password"),h.Sb(),h.Tb(3,"mat-slide-toggle",28),h.dc("ngModelChange",function(t){return h.Bc(e),h.hc().passChange=t}),h.Sb(),h.Sb()}if(2&e){const e=h.hc();h.Ab(3),h.oc("ngModel",e.passChange)}}function V(e,t){if(1&e){const e=h.Ub();h.Tb(0,"div",10),h.Tb(1,"mat-form-field",11),h.Tb(2,"input",29),h.dc("ngModelChange",function(t){return h.Bc(e),h.hc().user.password=t}),h.Sb(),h.Tb(3,"mat-error"),h.Lc(4,"Password is "),h.Tb(5,"strong"),h.Lc(6,"required"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){const e=h.hc();h.Ab(2),h.oc("ngModel",e.user.password)}}const K=function(e){return{"card-body-progress card-body-progress-overlay":e}};let H=(()=>{class e{constructor(e,t,i,a,s){this.dialogRef=e,this.data=t,this.fb=i,this.usersService=a,this.commonService=s,this.user={role_id:"",allowed_access:"",name:"",email:"",phone:"",password:""},this.pages=[{value:"users",name:"Users"},{value:"brands",name:"Brands"},{value:"categories",name:"Categories"},{value:"products",name:"Products"},{value:"sales",name:"Sales"},{value:"purchases",name:"Purchases"},{value:"orders",name:"Orders"}],this.passChange=!1,this.viewLoading=!0}ngOnInit(){this.roles=this.data.paramsData.roles,this.data.user&&(this.user=this.data.user,this.mode="edit"),this.viewLoading=!1}getTitle(){return this.user.id?`Edit User '${this.user.name}'`:"New User"}onSubmit(){this.disabled=!0,"edit"===this.mode?this.usersService.updateUser(this.user).pipe(Object(m.a)(()=>this.disabled=!1)).subscribe(({message:e})=>{this.commonService.openSnackBar(e),this.dialogRef.close(e)},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)}):this.usersService.addUser(this.user).pipe(Object(m.a)(()=>this.disabled=!1)).subscribe(({message:e})=>{this.commonService.openSnackBar(e),this.dialogRef.close(e)},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})}}return e.\u0275fac=function(t){return new(t||e)(h.Nb(b.f),h.Nb(b.a),h.Nb(s.e),h.Nb(p),h.Nb(f.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-add-user-dialog"]],decls:48,vars:14,consts:[[1,"card","card-custom",3,"ngClass"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"form",3,"ngSubmit"],["f","ngForm"],[1,"card-body"],[1,"card-body-progress"],[3,"diameter"],[1,"form-group","row"],[1,"col-lg-4","kt-margin-bottom-20-mobile","my-2"],[1,"mat-form-field-fluid"],["placeholder","Select Role","name","role","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-lg-4 kt-margin-bottom-20-mobile my-2",4,"ngIf"],["type","text","matInput","","placeholder","Name","name","name","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","placeholder","Email","name","email","email","",3,"ngModel","ngModelChange"],["matInput","","type","tel","placeholder","Phone","name","phone","required","",3,"ngModel","ngModelChange"],["class","\n\t\t\t\t\t\tcol-lg-4\n\t\t\t\t\t\tkt-margin-bottom-20-mobile\n\t\t\t\t\t\tmy-2\n\t\t\t\t\t\td-flex\n\t\t\t\t\t\talign-items-center\n\t\t\t\t\t",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-content-between"],[1,"mr-2"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],["placeholder","Grant Access","name","access","required","","multiple","",3,"ngModel","ngModelChange"],[1,"col-lg-4","kt-margin-bottom-20-mobile","my-2","d-flex","align-items-center"],[1,"mx-3"],["color","primary","name","passChange",3,"ngModel","ngModelChange"],["type","password","matInput","","placeholder","Password","name","password","required","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(h.Tb(0,"div",0),h.Tb(1,"div",1),h.Tb(2,"div",2),h.Tb(3,"h3",3),h.Lc(4),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"form",4,5),h.dc("ngSubmit",function(){return t.onSubmit()}),h.Tb(7,"div",6),h.Tb(8,"div",7),h.Ob(9,"mat-spinner",8),h.Sb(),h.Tb(10,"div",9),h.Tb(11,"div",10),h.Tb(12,"mat-form-field",11),h.Tb(13,"mat-select",12),h.dc("ngModelChange",function(e){return t.user.role_id=e}),h.Jc(14,F,2,2,"mat-option",13),h.Sb(),h.Tb(15,"mat-error"),h.Lc(16,"Role is "),h.Tb(17,"strong"),h.Lc(18,"required"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Jc(19,z,7,2,"div",14),h.Tb(20,"div",10),h.Tb(21,"mat-form-field",11),h.Tb(22,"input",15),h.dc("ngModelChange",function(e){return t.user.name=e}),h.Sb(),h.Tb(23,"mat-error"),h.Lc(24,"Name is "),h.Tb(25,"strong"),h.Lc(26,"required"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(27,"div",10),h.Tb(28,"mat-form-field",11),h.Tb(29,"input",16),h.dc("ngModelChange",function(e){return t.user.email=e}),h.Sb(),h.Sb(),h.Sb(),h.Tb(30,"div",10),h.Tb(31,"mat-form-field",11),h.Tb(32,"input",17),h.dc("ngModelChange",function(e){return t.user.phone=e}),h.Sb(),h.Tb(33,"mat-error"),h.Lc(34,"Phone is "),h.Tb(35,"strong"),h.Lc(36,"required"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Jc(37,Q,4,1,"div",18),h.Jc(38,V,7,1,"div",14),h.Sb(),h.Sb(),h.Tb(39,"div",19),h.Tb(40,"div",20),h.Ob(41,"div",21),h.Tb(42,"div"),h.Tb(43,"button",22),h.Lc(44," Cancel"),h.Sb(),h.Lc(45,"\xa0 "),h.Tb(46,"button",23),h.dc("click",function(){return t.onSubmit()}),h.Lc(47," Save "),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){const e=h.xc(6);h.oc("ngClass",h.sc(12,K,t.viewLoading)),h.Ab(4),h.Mc(t.getTitle()),h.Ab(5),h.oc("diameter",20),h.Ab(4),h.oc("ngModel",t.user.role_id),h.Ab(1),h.oc("ngForOf",t.roles),h.Ab(5),h.oc("ngIf",1===t.user.role_id&&!t.user.is_super_admin),h.Ab(3),h.oc("ngModel",t.user.name),h.Ab(7),h.oc("ngModel",t.user.email),h.Ab(3),h.oc("ngModel",t.user.phone),h.Ab(5),h.oc("ngIf","edit"==t.mode),h.Ab(1),h.oc("ngIf","edit"!==t.mode||"edit"===t.mode&&t.passChange),h.Ab(8),h.oc("disabled",t.viewLoading||e.invalid||e.pristine||t.disabled)}},directives:[a.l,s.y,s.o,s.p,S.b,v.c,T.a,s.u,s.n,s.q,a.m,v.b,a.n,C.a,s.c,s.d,y.b,b.d,w.f,j],styles:[""]}),e})();var G=i("tmEo"),X=i("+0xr"),W=i("NFeN");function Y(e,t){if(1&e&&(h.Tb(0,"mat-option",32),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.oc("value",e.id),h.Ab(1),h.Nc(" ",e.name," ")}}function Z(e,t){1&e&&(h.Tb(0,"mat-header-cell"),h.Lc(1," Name "),h.Sb())}function ee(e,t){if(1&e&&(h.Tb(0,"mat-cell"),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.Ab(1),h.Nc(" ",e.name," ")}}function te(e,t){1&e&&(h.Tb(0,"mat-header-cell"),h.Lc(1," Email "),h.Sb())}function ie(e,t){if(1&e&&(h.Tb(0,"mat-cell"),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.Ab(1),h.Nc(" ",e.email," ")}}function ae(e,t){1&e&&(h.Tb(0,"mat-header-cell"),h.Lc(1," Phone "),h.Sb())}function se(e,t){if(1&e&&(h.Tb(0,"mat-cell"),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.Ab(1),h.Nc(" ",e.phone," ")}}function ne(e,t){1&e&&(h.Tb(0,"mat-header-cell"),h.Lc(1," Role "),h.Sb())}function re(e,t){if(1&e&&(h.Tb(0,"mat-cell"),h.Lc(1),h.Sb()),2&e){const e=t.$implicit;h.Ab(1),h.Nc(" ",e.role.name," ")}}function oe(e,t){1&e&&(h.Tb(0,"mat-header-cell"),h.Lc(1," Actions "),h.Sb())}function le(e,t){if(1&e){const e=h.Ub();h.Tb(0,"div"),h.Tb(1,"button",35),h.dc("click",function(){h.Bc(e);const t=h.hc().$implicit;return h.hc().editUser(t)}),h.Tb(2,"mat-icon"),h.Lc(3,"create"),h.Sb(),h.Sb(),h.Lc(4,"\xa0 "),h.Tb(5,"button",36),h.dc("click",function(){h.Bc(e);const t=h.hc(),i=t.$implicit,a=t.index;return h.hc().deleteUser(i.id,a)}),h.Tb(6,"mat-icon"),h.Lc(7,"delete"),h.Sb(),h.Sb(),h.Sb()}if(2&e){const e=h.hc().$implicit,t=h.hc();h.Ab(5),h.oc("disabled",t.currentUser.id===e.id)}}function ce(e,t){1&e&&h.Lc(0," Super Admin ")}function de(e,t){if(1&e&&(h.Tb(0,"mat-cell"),h.Jc(1,le,8,1,"div",33),h.Jc(2,ce,1,0,"ng-template",null,34,h.Kc),h.Sb()),2&e){const e=t.$implicit,i=h.xc(3),a=h.hc();h.Ab(1),h.oc("ngIf",!e.is_super_admin||a.currentUser.id===e.id)("ngIfElse",i)}}function be(e,t){1&e&&h.Ob(0,"mat-header-row")}function me(e,t){1&e&&h.Ob(0,"mat-row")}function he(e,t){1&e&&(h.Tb(0,"div",37),h.Lc(1," No records found "),h.Sb())}function ge(e,t){1&e&&(h.Tb(0,"div",37),h.Lc(1," Please wait.... "),h.Sb())}function ue(e,t){1&e&&h.Ob(0,"mat-spinner",38),2&e&&h.oc("diameter",20)}let pe=(()=>{class e{constructor(e,t,i,a,n){this.commonService=e,this.cdr=t,this.usersService=i,this.dialog=a,this.authService=n,this.loaded=!1,this.subscriptions=[],this.search=new s.f(""),this.role=new s.f(""),this.pageIndex=0,this.pageSize=20,this.users=[],this.roles=[],this.currentUser=this.authService.currentUserValue,this.displayedColumns=["name","email","phone","role","actions"]}ngOnInit(){this.usersService.getCreateUserParams().subscribe(e=>{this.userData=e,this.roles=e.roles})}ngAfterViewInit(){this.search.valueChanges.subscribe(()=>{this.paginator.pageIndex=0}),this.role.valueChanges.subscribe(()=>{this.paginator.pageIndex=0});const e=Object(c.a)(this.role.valueChanges,this.paginator.page).pipe(Object(r.a)({}),Object(o.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this)),t=this.search.valueChanges.pipe(Object(l.a)(1e3),Object(o.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this));this.subscriptions.push(e,t)}prepareQueryParams(){return this.loaded=!1,this.queryParams={page_index:this.paginator.pageIndex,search:this.search.value,items_per_page:this.pageSize,role_id:this.role.value},this.usersService.getUsers(this.queryParams)}handleResponse(e){this.totalUsers=e.total,this.users=e.users,this.loaded=!0,this.cdr.detectChanges()}addUser(){this.dialog.open(H,{data:{paramsData:this.userData},disableClose:!0}).afterClosed().subscribe(e=>{e&&this.usersService.getUsers(this.queryParams).subscribe(this.handleResponse.bind(this))})}editUser(e){this.dialog.open(H,{data:{paramsData:this.userData,user:e},disableClose:!0}).afterClosed().subscribe(e=>{e&&this.usersService.getUsers(this.queryParams).subscribe(this.handleResponse.bind(this))})}deleteUser(e,t){this.dialog.open(d.a,{data:{title:"Delete User",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(i=>{i&&i.confirm&&this.usersService.deleteUser(e).subscribe(e=>{const i=[...this.users];i.splice(t,1),this.users=i,this.cdr.detectChanges(),this.commonService.openSnackBar(e.message)},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(h.Nb(f.a),h.Nb(h.h),h.Nb(p),h.Nb(b.c),h.Nb(G.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-list"]],viewQuery:function(e,t){if(1&e&&h.Fc(n.a,!0),2&e){let e;h.wc(e=h.ec())&&(t.paginator=e.first)}},decls:56,vars:13,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"form","mb-3"],[1,"form-filtration"],[1,"row","align-items-center"],[1,"col-lg-3","kt-margin-bottom-10-mobile"],[1,"mat-form-field-fluid"],["matInput","","placeholder","Search user",3,"formControl"],["align","start"],["placeholder","Role",3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","showFirstLastButtons","length"],[3,"value"],[4,"ngIf","ngIfElse"],["superAdmin",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn","type","button",3,"disabled","click"],[1,"mat-table-message"],[3,"diameter"]],template:function(e,t){1&e&&(h.Tb(0,"div",0),h.Tb(1,"div",1),h.Tb(2,"div",2),h.Tb(3,"h3"),h.Lc(4,"Users"),h.Sb(),h.Sb(),h.Tb(5,"div",3),h.Tb(6,"button",4),h.dc("click",function(){return t.addUser()}),h.Lc(7," Add User "),h.Sb(),h.Sb(),h.Sb(),h.Tb(8,"div",5),h.Tb(9,"div",6),h.Tb(10,"div",7),h.Tb(11,"div",8),h.Tb(12,"div",9),h.Tb(13,"mat-form-field",10),h.Ob(14,"input",11),h.Tb(15,"mat-hint",12),h.Tb(16,"strong"),h.Lc(17,"Search"),h.Sb(),h.Lc(18," Users "),h.Sb(),h.Sb(),h.Sb(),h.Tb(19,"div",9),h.Tb(20,"mat-form-field",10),h.Tb(21,"mat-label"),h.Lc(22,"Role"),h.Sb(),h.Tb(23,"mat-select",13),h.Tb(24,"mat-option",14),h.Lc(25," All "),h.Sb(),h.Jc(26,Y,2,2,"mat-option",15),h.Sb(),h.Tb(27,"mat-hint",12),h.Tb(28,"strong"),h.Lc(29,"Filter"),h.Sb(),h.Lc(30," by Role "),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(31,"div",16),h.Tb(32,"mat-table",17,18),h.Rb(34,19),h.Jc(35,Z,2,0,"mat-header-cell",20),h.Jc(36,ee,2,1,"mat-cell",21),h.Qb(),h.Rb(37,22),h.Jc(38,te,2,0,"mat-header-cell",20),h.Jc(39,ie,2,1,"mat-cell",21),h.Qb(),h.Rb(40,23),h.Jc(41,ae,2,0,"mat-header-cell",20),h.Jc(42,se,2,1,"mat-cell",21),h.Qb(),h.Rb(43,24),h.Jc(44,ne,2,0,"mat-header-cell",20),h.Jc(45,re,2,1,"mat-cell",21),h.Qb(),h.Rb(46,25),h.Jc(47,oe,2,0,"mat-header-cell",20),h.Jc(48,de,4,2,"mat-cell",21),h.Qb(),h.Jc(49,be,1,0,"mat-header-row",26),h.Jc(50,me,1,0,"mat-row",27),h.Sb(),h.Jc(51,he,2,0,"div",28),h.Jc(52,ge,2,0,"div",28),h.Sb(),h.Tb(53,"div",29),h.Jc(54,ue,1,1,"mat-spinner",30),h.Ob(55,"mat-paginator",31),h.Sb(),h.Sb(),h.Sb()),2&e&&(h.Ab(6),h.oc("disabled",!t.loaded),h.Ab(8),h.oc("formControl",t.search),h.Ab(9),h.oc("formControl",t.role),h.Ab(3),h.oc("ngForOf",t.roles),h.Ab(6),h.oc("dataSource",t.users),h.Ab(17),h.oc("matHeaderRowDef",t.displayedColumns),h.Ab(1),h.oc("matRowDefColumns",t.displayedColumns),h.Ab(1),h.oc("ngIf",t.loaded&&0==t.users.length),h.Ab(1),h.oc("ngIf",!t.loaded&&!t.users.length),h.Ab(2),h.oc("ngIf",!t.loaded),h.Ab(1),h.oc("pageSize",t.pageSize)("showFirstLastButtons",!0)("length",t.totalUsers))},directives:[v.c,C.a,s.c,s.n,s.g,v.f,v.g,T.a,w.f,a.m,X.j,X.c,X.e,X.b,X.g,X.i,a.n,n.a,X.d,X.a,y.b,W.a,X.f,X.h,S.b],styles:[""]}),e})();var fe=i("tyNb");let Se=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Hb({type:e,selectors:[["app-users"]],decls:1,vars:0,template:function(e,t){1&e&&h.Ob(0,"router-outlet")},directives:[fe.l],styles:[""]}),e})();var ve=i("93Pz"),Te=i("rIor"),Ce=i("ZOsW");let ye=(()=>{class e{}return e.\u0275mod=h.Lb({type:e}),e.\u0275inj=h.Kb({factory:function(t){return new(t||e)},providers:[{provide:b.b,useValue:{hasBackdrop:!0,panelClass:"mat-dialog-container-wrapper",height:"auto",width:"900px"}}],imports:[[a.c,y.c,X.l,n.b,S.a,W.b,ve.a,b.e,s.j,s.t,y.c,T.b,C.b,Ce.a,E,Te.b,fe.k.forChild([{path:"",component:Se,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:pe}]}])]]}),e})()}}]);