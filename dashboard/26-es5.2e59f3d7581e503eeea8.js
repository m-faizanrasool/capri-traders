!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"+P1L":function(t,a,r){"use strict";r.r(a),r.d(a,"UsersModule",function(){return je});var l,c,d,b,u=r("ofXK"),m=r("3Pt+"),g=r("M9IT"),h=r("JX91"),p=r("eIep"),f=r("Kj3r"),v=r("VRyK"),y=r("zyfY"),S=r("0IaG"),T=r("nYR2"),k=r("fXoL"),C=r("tk/3"),w=r("AytR"),I=((l=function(){function e(t){o(this,e),this.httpClient=t}return s(e,[{key:"getUsers",value:function(e){var t=new C.e({fromObject:e}).toString();return this.httpClient.get(w.a.apiUrl+"users?"+t)}},{key:"getCreateUserParams",value:function(){return this.httpClient.get(w.a.apiUrl+"users/create")}},{key:"addUser",value:function(e){return this.httpClient.post(w.a.apiUrl+"users",e)}},{key:"updateUser",value:function(e){return this.httpClient.patch(w.a.apiUrl+"users/"+e.id,e)}},{key:"deleteUser",value:function(e){return this.httpClient.delete(w.a.apiUrl+"users/"+e)}}]),e}()).\u0275fac=function(e){return new(e||l)(k.ac(C.c))},l.\u0275prov=k.Jb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),_=r("OlR4"),A=r("Xa2L"),x=r("kmnG"),O=r("d3UM"),R=r("qFsG"),K=r("bTqV"),M=r("FKr1"),U=r("GU7r"),j=r("8LU1"),P=r("R1ws"),D=r("u47x"),q=["thumbContainer"],E=["toggleBar"],L=["input"],N=function(){return{enterDuration:150}},F=["*"],B=new k.r("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),$=0,z={provide:m.l,useExisting:Object(k.U)(function(){return H}),multi:!0},Q=function e(t,n){o(this,e),this.source=t,this.checked=n},V=Object(M.r)(Object(M.m)(Object(M.n)(Object(M.o)(function e(t){o(this,e),this._elementRef=t})),"accent")),H=((b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(a,e);var t=i(a);function a(e,n,i,r,l,s){var c;return o(this,a),(c=t.call(this,e))._focusMonitor=n,c._changeDetectorRef=i,c.defaults=l,c._animationMode=s,c._onChange=function(e){},c._onTouched=function(){},c._uniqueId="mat-slide-toggle-"+ ++$,c._required=!1,c._checked=!1,c.name=null,c.id=c._uniqueId,c.labelPosition="after",c.ariaLabel=null,c.ariaLabelledby=null,c.change=new k.o,c.toggleChange=new k.o,c.tabIndex=parseInt(r)||0,c}return s(a,[{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then(function(){return e._onTouched()})})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new Q(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(j.c)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=Object(j.c)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return(this.id||this._uniqueId)+"-input"}}]),a}(V)).\u0275fac=function(e){return new(e||b)(k.Nb(k.l),k.Nb(D.d),k.Nb(k.h),k.bc("tabindex"),k.Nb(B),k.Nb(P.a,8))},b.\u0275cmp=k.Hb({type:b,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var n;1&e&&(k.Oc(q,!0),k.Oc(E,!0),k.Oc(L,!0)),2&e&&(k.vc(n=k.ec())&&(t._thumbEl=n.first),k.vc(n=k.ec())&&(t._thumbBarEl=n.first),k.vc(n=k.ec())&&(t._inputElement=n.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(k.Wb("id",t.id),k.Bb("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),k.Fb("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[k.zb([z]),k.xb],ngContentSelectors:F,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(k.mc(),k.Tb(0,"label",0,1),k.Tb(2,"div",2,3),k.Tb(4,"input",4,5),k.dc("change",function(e){return t._onChangeEvent(e)})("click",function(e){return t._onInputClick(e)}),k.Sb(),k.Tb(6,"div",6,7),k.Ob(8,"div",8),k.Tb(9,"div",9),k.Ob(10,"div",10),k.Sb(),k.Sb(),k.Sb(),k.Tb(11,"span",11,12),k.dc("cdkObserveContent",function(){return t._onLabelTextChange()}),k.Tb(13,"span",13),k.Kc(14,"\xa0"),k.Sb(),k.lc(15),k.Sb(),k.Sb()),2&e){var n=k.wc(1),i=k.wc(12);k.Bb("for",t.inputId),k.Ab(2),k.Fb("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),k.Ab(2),k.nc("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),k.Bb("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),k.Ab(5),k.nc("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",k.qc(17,N))}},directives:[M.i,U.a],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),b),G=((d=function e(){o(this,e)}).\u0275mod=k.Lb({type:d}),d.\u0275inj=k.Kb({factory:function(e){return new(e||d)}}),d),J=((c=function e(){o(this,e)}).\u0275mod=k.Lb({type:c}),c.\u0275inj=k.Kb({factory:function(e){return new(e||c)},imports:[[G,M.j,M.f,U.c],G,M.f]}),c);function X(e,t){if(1&e&&(k.Tb(0,"mat-option",24),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.nc("value",n.id),k.Ab(1),k.Mc(" ",n.name," ")}}function W(e,t){if(1&e&&(k.Tb(0,"mat-option",24),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.nc("value",n.value),k.Ab(1),k.Mc(" ",n.name," ")}}function Y(e,t){if(1&e){var n=k.Ub();k.Tb(0,"div",10),k.Tb(1,"mat-form-field",11),k.Tb(2,"mat-select",25),k.dc("ngModelChange",function(e){return k.Ac(n),k.hc().user.allowed_access=e}),k.Ic(3,W,2,2,"mat-option",13),k.Sb(),k.Tb(4,"mat-error"),k.Tb(5,"strong"),k.Kc(6,"required"),k.Sb(),k.Sb(),k.Sb(),k.Sb()}if(2&e){var i=k.hc();k.Ab(2),k.nc("ngModel",i.user.allowed_access),k.Ab(1),k.nc("ngForOf",i.pages)}}function Z(e,t){if(1&e){var n=k.Ub();k.Tb(0,"div",26),k.Tb(1,"span",27),k.Kc(2,"Change Password"),k.Sb(),k.Tb(3,"mat-slide-toggle",28),k.dc("ngModelChange",function(e){return k.Ac(n),k.hc().passChange=e}),k.Sb(),k.Sb()}if(2&e){var i=k.hc();k.Ab(3),k.nc("ngModel",i.passChange)}}function ee(e,t){if(1&e){var n=k.Ub();k.Tb(0,"div",10),k.Tb(1,"mat-form-field",11),k.Tb(2,"input",29),k.dc("ngModelChange",function(e){return k.Ac(n),k.hc().user.password=e}),k.Sb(),k.Tb(3,"mat-error"),k.Kc(4,"Password is "),k.Tb(5,"strong"),k.Kc(6,"required"),k.Sb(),k.Sb(),k.Sb(),k.Sb()}if(2&e){var i=k.hc();k.Ab(2),k.nc("ngModel",i.user.password)}}var te,ne=function(e){return{"card-body-progress card-body-progress-overlay":e}},ie=((te=function(){function e(t,n,i,a,r){o(this,e),this.dialogRef=t,this.data=n,this.fb=i,this.usersService=a,this.commonService=r,this.user={role_id:"",allowed_access:"",name:"",email:"",phone:"",password:""},this.pages=[{value:"users",name:"Users"},{value:"brands",name:"Brands"},{value:"categories",name:"Categories"},{value:"items",name:"Items"},{value:"sales",name:"Sales"},{value:"purchases",name:"Purchases"},{value:"orders",name:"Orders"}],this.passChange=!1,this.viewLoading=!0}return s(e,[{key:"ngOnInit",value:function(){this.roles=this.data.paramsData.roles,this.data.user&&(this.user=this.data.user,this.mode="edit"),this.viewLoading=!1}},{key:"getTitle",value:function(){return this.user.id?"Edit User '".concat(this.user.name,"'"):"New User"}},{key:"onSubmit",value:function(){var e=this;this.disabled=!0,"edit"===this.mode?this.usersService.updateUser(this.user).pipe(Object(T.a)(function(){return e.disabled=!1})).subscribe(function(t){var n=t.message;e.commonService.openSnackBar(n),e.dialogRef.close(n)},function(t){var n=t.error;e.commonService.openSnackBar(n.message,4e3)}):this.usersService.addUser(this.user).pipe(Object(T.a)(function(){return e.disabled=!1})).subscribe(function(t){var n=t.message;e.commonService.openSnackBar(n),e.dialogRef.close(n)},function(t){var n=t.error;e.commonService.openSnackBar(n.message,4e3)})}}]),e}()).\u0275fac=function(e){return new(e||te)(k.Nb(S.f),k.Nb(S.a),k.Nb(m.e),k.Nb(I),k.Nb(_.a))},te.\u0275cmp=k.Hb({type:te,selectors:[["app-add-user-dialog"]],decls:48,vars:14,consts:[[1,"card","card-custom",3,"ngClass"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"form",3,"ngSubmit"],["f","ngForm"],[1,"card-body"],[1,"card-body-progress"],[3,"diameter"],[1,"form-group","row"],[1,"col-lg-4","kt-margin-bottom-20-mobile","my-2"],[1,"mat-form-field-fluid"],["placeholder","Select Role","name","role","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-lg-4 kt-margin-bottom-20-mobile my-2",4,"ngIf"],["type","text","matInput","","placeholder","Name","name","name","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","placeholder","Email","name","email","email","",3,"ngModel","ngModelChange"],["matInput","","type","tel","placeholder","Phone","name","phone","required","",3,"ngModel","ngModelChange"],["class","\n\t\t\t\t\t\tcol-lg-4\n\t\t\t\t\t\tkt-margin-bottom-20-mobile\n\t\t\t\t\t\tmy-2\n\t\t\t\t\t\td-flex\n\t\t\t\t\t\talign-items-center\n\t\t\t\t\t",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-content-between"],[1,"mr-2"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],["placeholder","Grant Access","name","access","required","","multiple","",3,"ngModel","ngModelChange"],[1,"col-lg-4","kt-margin-bottom-20-mobile","my-2","d-flex","align-items-center"],[1,"mx-3"],["color","primary","name","passChange",3,"ngModel","ngModelChange"],["type","password","matInput","","placeholder","Password","name","password","required","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(k.Tb(0,"div",0),k.Tb(1,"div",1),k.Tb(2,"div",2),k.Tb(3,"h3",3),k.Kc(4),k.Sb(),k.Sb(),k.Sb(),k.Tb(5,"form",4,5),k.dc("ngSubmit",function(){return t.onSubmit()}),k.Tb(7,"div",6),k.Tb(8,"div",7),k.Ob(9,"mat-spinner",8),k.Sb(),k.Tb(10,"div",9),k.Tb(11,"div",10),k.Tb(12,"mat-form-field",11),k.Tb(13,"mat-select",12),k.dc("ngModelChange",function(e){return t.user.role_id=e}),k.Ic(14,X,2,2,"mat-option",13),k.Sb(),k.Tb(15,"mat-error"),k.Kc(16,"Role is "),k.Tb(17,"strong"),k.Kc(18,"required"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Ic(19,Y,7,2,"div",14),k.Tb(20,"div",10),k.Tb(21,"mat-form-field",11),k.Tb(22,"input",15),k.dc("ngModelChange",function(e){return t.user.name=e}),k.Sb(),k.Tb(23,"mat-error"),k.Kc(24,"Name is "),k.Tb(25,"strong"),k.Kc(26,"required"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(27,"div",10),k.Tb(28,"mat-form-field",11),k.Tb(29,"input",16),k.dc("ngModelChange",function(e){return t.user.email=e}),k.Sb(),k.Sb(),k.Sb(),k.Tb(30,"div",10),k.Tb(31,"mat-form-field",11),k.Tb(32,"input",17),k.dc("ngModelChange",function(e){return t.user.phone=e}),k.Sb(),k.Tb(33,"mat-error"),k.Kc(34,"Phone is "),k.Tb(35,"strong"),k.Kc(36,"required"),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Ic(37,Z,4,1,"div",18),k.Ic(38,ee,7,1,"div",14),k.Sb(),k.Sb(),k.Tb(39,"div",19),k.Tb(40,"div",20),k.Ob(41,"div",21),k.Tb(42,"div"),k.Tb(43,"button",22),k.Kc(44," Cancel"),k.Sb(),k.Kc(45,"\xa0 "),k.Tb(46,"button",23),k.dc("click",function(){return t.onSubmit()}),k.Kc(47," Save "),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb()),2&e){var n=k.wc(6);k.nc("ngClass",k.rc(12,ne,t.viewLoading)),k.Ab(4),k.Lc(t.getTitle()),k.Ab(5),k.nc("diameter",20),k.Ab(4),k.nc("ngModel",t.user.role_id),k.Ab(1),k.nc("ngForOf",t.roles),k.Ab(5),k.nc("ngIf",1===t.user.role_id&&!t.user.is_super_admin),k.Ab(3),k.nc("ngModel",t.user.name),k.Ab(7),k.nc("ngModel",t.user.email),k.Ab(3),k.nc("ngModel",t.user.phone),k.Ab(5),k.nc("ngIf","edit"==t.mode),k.Ab(1),k.nc("ngIf","edit"!==t.mode||"edit"===t.mode&&t.passChange),k.Ab(8),k.nc("disabled",t.viewLoading||n.invalid||n.pristine||t.disabled)}},directives:[u.l,m.y,m.o,m.p,A.b,x.c,O.a,m.u,m.n,m.q,u.m,x.b,u.n,R.a,m.c,m.d,K.b,S.d,M.g,H],styles:[""]}),te),ae=r("tmEo"),re=r("+0xr"),oe=r("NFeN");function le(e,t){if(1&e&&(k.Tb(0,"mat-option",32),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.nc("value",n.id),k.Ab(1),k.Mc(" ",n.name," ")}}function se(e,t){1&e&&(k.Tb(0,"mat-header-cell"),k.Kc(1," Name "),k.Sb())}function ce(e,t){if(1&e&&(k.Tb(0,"mat-cell"),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.Ab(1),k.Mc(" ",n.name," ")}}function de(e,t){1&e&&(k.Tb(0,"mat-header-cell"),k.Kc(1," Email "),k.Sb())}function be(e,t){if(1&e&&(k.Tb(0,"mat-cell"),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.Ab(1),k.Mc(" ",n.email," ")}}function ue(e,t){1&e&&(k.Tb(0,"mat-header-cell"),k.Kc(1," Phone "),k.Sb())}function me(e,t){if(1&e&&(k.Tb(0,"mat-cell"),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.Ab(1),k.Mc(" ",n.phone," ")}}function ge(e,t){1&e&&(k.Tb(0,"mat-header-cell"),k.Kc(1," Role "),k.Sb())}function he(e,t){if(1&e&&(k.Tb(0,"mat-cell"),k.Kc(1),k.Sb()),2&e){var n=t.$implicit;k.Ab(1),k.Mc(" ",n.role.name," ")}}function pe(e,t){1&e&&(k.Tb(0,"mat-header-cell"),k.Kc(1," Actions "),k.Sb())}function fe(e,t){if(1&e){var n=k.Ub();k.Tb(0,"div"),k.Tb(1,"button",35),k.dc("click",function(){k.Ac(n);var e=k.hc().$implicit;return k.hc().editUser(e)}),k.Tb(2,"mat-icon"),k.Kc(3,"create"),k.Sb(),k.Sb(),k.Kc(4,"\xa0 "),k.Tb(5,"button",36),k.dc("click",function(){k.Ac(n);var e=k.hc(),t=e.$implicit,i=e.index;return k.hc().deleteUser(t.id,i)}),k.Tb(6,"mat-icon"),k.Kc(7,"delete"),k.Sb(),k.Sb(),k.Sb()}if(2&e){var i=k.hc().$implicit,a=k.hc();k.Ab(5),k.nc("disabled",a.currentUser.id===i.id)}}function ve(e,t){1&e&&k.Kc(0," Super Admin ")}function ye(e,t){if(1&e&&(k.Tb(0,"mat-cell"),k.Ic(1,fe,8,1,"div",33),k.Ic(2,ve,1,0,"ng-template",null,34,k.Jc),k.Sb()),2&e){var n=t.$implicit,i=k.wc(3),a=k.hc();k.Ab(1),k.nc("ngIf",!n.is_super_admin||a.currentUser.id===n.id)("ngIfElse",i)}}function Se(e,t){1&e&&k.Ob(0,"mat-header-row")}function Te(e,t){1&e&&k.Ob(0,"mat-row")}function ke(e,t){1&e&&(k.Tb(0,"div",37),k.Kc(1," No records found "),k.Sb())}function Ce(e,t){1&e&&(k.Tb(0,"div",37),k.Kc(1," Please wait.... "),k.Sb())}function we(e,t){1&e&&k.Ob(0,"mat-spinner",38),2&e&&k.nc("diameter",20)}var Ie,_e,Ae,xe=((Ie=function(){function t(e,n,i,a,r){o(this,t),this.commonService=e,this.cdr=n,this.usersService=i,this.dialog=a,this.authService=r,this.loaded=!1,this.subscriptions=[],this.search=new m.f(""),this.role=new m.f(""),this.pageIndex=0,this.pageSize=20,this.users=[],this.roles=[],this.currentUser=this.authService.currentUserValue,this.displayedColumns=["name","email","phone","role","actions"]}return s(t,[{key:"ngOnInit",value:function(){var e=this;this.usersService.getCreateUserParams().subscribe(function(t){e.userData=t,e.roles=t.roles})}},{key:"ngAfterViewInit",value:function(){var e=this;this.search.valueChanges.subscribe(function(){e.paginator.pageIndex=0}),this.role.valueChanges.subscribe(function(){e.paginator.pageIndex=0});var t=Object(v.a)(this.role.valueChanges,this.paginator.page).pipe(Object(h.a)({}),Object(p.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this)),n=this.search.valueChanges.pipe(Object(f.a)(1e3),Object(p.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this));this.subscriptions.push(t,n)}},{key:"prepareQueryParams",value:function(){return this.loaded=!1,this.queryParams={page_index:this.paginator.pageIndex,search:this.search.value,items_per_page:this.pageSize,role_id:this.role.value},this.usersService.getUsers(this.queryParams)}},{key:"handleResponse",value:function(e){this.totalUsers=e.total,this.users=e.users,this.loaded=!0,this.cdr.detectChanges()}},{key:"addUser",value:function(){var e=this;this.dialog.open(ie,{data:{paramsData:this.userData},disableClose:!0}).afterClosed().subscribe(function(t){t&&e.usersService.getUsers(e.queryParams).subscribe(e.handleResponse.bind(e))})}},{key:"editUser",value:function(e){var t=this;this.dialog.open(ie,{data:{paramsData:this.userData,user:e},disableClose:!0}).afterClosed().subscribe(function(e){e&&t.usersService.getUsers(t.queryParams).subscribe(t.handleResponse.bind(t))})}},{key:"deleteUser",value:function(t,n){var i=this;this.dialog.open(y.a,{data:{title:"Delete User",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(function(a){a&&a.confirm&&i.usersService.deleteUser(t).subscribe(function(t){var a=e(i.users);a.splice(n,1),i.users=a,i.cdr.detectChanges(),i.commonService.openSnackBar(t.message)},function(e){var t=e.error;i.commonService.openSnackBar(t.message,4e3)})})}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||Ie)(k.Nb(_.a),k.Nb(k.h),k.Nb(I),k.Nb(S.c),k.Nb(ae.a))},Ie.\u0275cmp=k.Hb({type:Ie,selectors:[["app-list"]],viewQuery:function(e,t){var n;1&e&&k.Ec(g.a,!0),2&e&&k.vc(n=k.ec())&&(t.paginator=n.first)},decls:56,vars:13,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"form","mb-3"],[1,"form-filtration"],[1,"row","align-items-center"],[1,"col-lg-3","kt-margin-bottom-10-mobile"],[1,"mat-form-field-fluid"],["matInput","","placeholder","Search user",3,"formControl"],["align","start"],["placeholder","Role",3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","showFirstLastButtons","length"],[3,"value"],[4,"ngIf","ngIfElse"],["superAdmin",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn","type","button",3,"disabled","click"],[1,"mat-table-message"],[3,"diameter"]],template:function(e,t){1&e&&(k.Tb(0,"div",0),k.Tb(1,"div",1),k.Tb(2,"div",2),k.Tb(3,"h3"),k.Kc(4,"Users"),k.Sb(),k.Sb(),k.Tb(5,"div",3),k.Tb(6,"button",4),k.dc("click",function(){return t.addUser()}),k.Kc(7," Add User "),k.Sb(),k.Sb(),k.Sb(),k.Tb(8,"div",5),k.Tb(9,"div",6),k.Tb(10,"div",7),k.Tb(11,"div",8),k.Tb(12,"div",9),k.Tb(13,"mat-form-field",10),k.Ob(14,"input",11),k.Tb(15,"mat-hint",12),k.Tb(16,"strong"),k.Kc(17,"Search"),k.Sb(),k.Kc(18," Users "),k.Sb(),k.Sb(),k.Sb(),k.Tb(19,"div",9),k.Tb(20,"mat-form-field",10),k.Tb(21,"mat-label"),k.Kc(22,"Role"),k.Sb(),k.Tb(23,"mat-select",13),k.Tb(24,"mat-option",14),k.Kc(25," All "),k.Sb(),k.Ic(26,le,2,2,"mat-option",15),k.Sb(),k.Tb(27,"mat-hint",12),k.Tb(28,"strong"),k.Kc(29,"Filter"),k.Sb(),k.Kc(30," by Role "),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Sb(),k.Tb(31,"div",16),k.Tb(32,"mat-table",17,18),k.Rb(34,19),k.Ic(35,se,2,0,"mat-header-cell",20),k.Ic(36,ce,2,1,"mat-cell",21),k.Qb(),k.Rb(37,22),k.Ic(38,de,2,0,"mat-header-cell",20),k.Ic(39,be,2,1,"mat-cell",21),k.Qb(),k.Rb(40,23),k.Ic(41,ue,2,0,"mat-header-cell",20),k.Ic(42,me,2,1,"mat-cell",21),k.Qb(),k.Rb(43,24),k.Ic(44,ge,2,0,"mat-header-cell",20),k.Ic(45,he,2,1,"mat-cell",21),k.Qb(),k.Rb(46,25),k.Ic(47,pe,2,0,"mat-header-cell",20),k.Ic(48,ye,4,2,"mat-cell",21),k.Qb(),k.Ic(49,Se,1,0,"mat-header-row",26),k.Ic(50,Te,1,0,"mat-row",27),k.Sb(),k.Ic(51,ke,2,0,"div",28),k.Ic(52,Ce,2,0,"div",28),k.Sb(),k.Tb(53,"div",29),k.Ic(54,we,1,1,"mat-spinner",30),k.Ob(55,"mat-paginator",31),k.Sb(),k.Sb(),k.Sb()),2&e&&(k.Ab(6),k.nc("disabled",!t.loaded),k.Ab(8),k.nc("formControl",t.search),k.Ab(9),k.nc("formControl",t.role),k.Ab(3),k.nc("ngForOf",t.roles),k.Ab(6),k.nc("dataSource",t.users),k.Ab(17),k.nc("matHeaderRowDef",t.displayedColumns),k.Ab(1),k.nc("matRowDefColumns",t.displayedColumns),k.Ab(1),k.nc("ngIf",t.loaded&&0==t.users.length),k.Ab(1),k.nc("ngIf",!t.loaded&&!t.users.length),k.Ab(2),k.nc("ngIf",!t.loaded),k.Ab(1),k.nc("pageSize",t.pageSize)("showFirstLastButtons",!0)("length",t.totalUsers))},directives:[x.c,R.a,m.c,m.n,m.g,x.f,x.g,O.a,M.g,u.m,re.j,re.c,re.e,re.b,re.g,re.i,u.n,g.a,re.d,re.a,K.b,oe.a,re.f,re.h,A.b],styles:[""]}),Ie),Oe=r("tyNb"),Re=((_e=function(){function e(){o(this,e)}return s(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||_e)},_e.\u0275cmp=k.Hb({type:_e,selectors:[["app-users"]],decls:1,vars:0,template:function(e,t){1&e&&k.Ob(0,"router-outlet")},directives:[Oe.l],styles:[""]}),_e),Ke=r("93Pz"),Me=r("rIor"),Ue=r("ZOsW"),je=((Ae=function e(){o(this,e)}).\u0275mod=k.Lb({type:Ae}),Ae.\u0275inj=k.Kb({factory:function(e){return new(e||Ae)},providers:[{provide:S.b,useValue:{hasBackdrop:!0,panelClass:"mat-dialog-container-wrapper",height:"auto",width:"900px"}}],imports:[[u.c,K.c,re.l,g.b,A.a,oe.b,Ke.a,S.e,m.j,m.t,K.c,O.b,R.b,Ue.a,J,Me.b,Oe.k.forChild([{path:"",component:Re,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:xe}]}])]]}),Ae)}}])}();