(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{aZ8X:function(e,n,t){"use strict";t.r(n),t.d(n,"BannersModule",function(){return U});var a=t("ofXK"),i=t("M9IT"),r=t("+0xr"),c=t("0IaG"),o=t("fXoL"),s=t("3Pt+"),b=t("bTqV"),d=t("rIor");function m(e,n){1&e&&(o.Tb(0,"h3"),o.Lc(1,"Selected Image:"),o.Sb())}function l(e,n){if(1&e){const e=o.Ub();o.Tb(0,"div",16),o.Jc(1,m,2,0,"h3",18),o.Tb(2,"image-cropper",19),o.dc("imageCropped",function(n){return o.Bc(e),o.hc(2).imageCropped(n)}),o.Sb(),o.Sb()}if(2&e){const e=o.hc(2);o.Ab(1),o.oc("ngIf",e.imageChangedEvent),o.Ab(1),o.oc("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",2)("cropperMinWidth",200)}}function g(e,n){if(1&e&&(o.Tb(0,"div",20),o.Ob(1,"img",21),o.Sb()),2&e){const e=o.hc(2);o.Ab(1),o.oc("src",e.banner.image,o.Cc)}}function h(e,n){if(1&e&&(o.Tb(0,"div",20),o.Ob(1,"img",21),o.Sb()),2&e){const e=o.hc(2);o.Ab(1),o.oc("src",e.banner.image_url,o.Cc)}}function u(e,n){if(1&e&&(o.Tb(0,"div",14),o.Jc(1,l,3,5,"div",15),o.Tb(2,"div",16),o.Tb(3,"h3"),o.Lc(4),o.Sb(),o.Jc(5,g,2,1,"div",17),o.Jc(6,h,2,1,"div",17),o.Sb(),o.Sb()),2&e){const e=o.hc();o.Ab(1),o.oc("ngIf",e.imageChangedEvent),o.Ab(3),o.Mc(e.imageChangedEvent?"Cropped Image:":"banner"),o.Ab(1),o.oc("ngIf",e.banner.image),o.Ab(1),o.oc("ngIf",e.banner.image_url&&!e.banner.image)}}let p=(()=>{class e{constructor(e,n){this.dialogRef=e,this.data=n,this.banner={},this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){this.data&&this.data.banner?(this.banner=this.data.banner,this.title="Update banner",this.mode="Update"):(this.title="Add banner",this.mode="Add")}fileChangeEvent(e){this.imageChangedEvent=e,this.banner.image=""}imageCropped(e){this.banner.image=e.base64,this.banner.image_url=e.base64}imageChanged(){this.banner.image=""}onSubmit(){this.dialogRef.close({banner:this.banner,isEdit:!1})}}return e.\u0275fac=function(n){return new(n||e)(o.Nb(c.f),o.Nb(c.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-add"]],decls:18,vars:4,consts:[[3,"ngSubmit"],["f","ngForm"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-group","row"],[1,"col-lg-4","kt-margin-bottom-20-mobile"],["type","file","name","image",3,"change"],[1,"separator","separator-dashed","my-6"],["class","row images",4,"ngIf"],[1,"card-footer"],["type","button","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["type","submit","color","primary","mat-raised-button","",1,"mr-2",3,"disabled"],[1,"row","images"],["class","col-lg-6 kt-margin-bottom-20-mobile",4,"ngIf"],[1,"col-lg-6","kt-margin-bottom-20-mobile"],["class","imagePreview",4,"ngIf"],[4,"ngIf"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMinWidth","imageCropped"],[1,"imagePreview"],[1,"img-fluid",3,"src"]],template:function(e,n){if(1&e&&(o.Tb(0,"form",0,1),o.dc("ngSubmit",function(){return n.onSubmit()}),o.Tb(2,"div",2),o.Tb(3,"div",3),o.Tb(4,"div",4),o.Lc(5),o.Sb(),o.Sb(),o.Tb(6,"div",5),o.Tb(7,"div",6),o.Tb(8,"div",7),o.Tb(9,"input",8),o.dc("change",function(e){return n.fileChangeEvent(e)}),o.Sb(),o.Sb(),o.Sb(),o.Ob(10,"div",9),o.Jc(11,u,7,4,"div",10),o.Sb(),o.Tb(12,"div",11),o.Tb(13,"button",12),o.Lc(14," Cancel"),o.Sb(),o.Lc(15,"\xa0 "),o.Tb(16,"button",13),o.Lc(17),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){const e=o.xc(1);o.Ab(5),o.Mc(n.title),o.Ab(6),o.oc("ngIf",n.banner.image||n.banner.image_url||n.imageChangedEvent),o.Ab(5),o.oc("disabled",e.invalid||e.pristine&&!n.banner.image),o.Ab(1),o.Nc(" ",n.mode," ")}},directives:[s.y,s.o,s.p,a.n,b.b,c.d,d.a],styles:[".card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e})();var f=t("zyfY"),S=t("AytR"),v=t("tk/3");let C=(()=>{class e{constructor(e){this.httpClient=e}getBanners(){return this.httpClient.get(S.a.apiUrl+"banners")}addBanner(e){return this.httpClient.post(S.a.apiUrl+"banners",e)}updateBanner(e){return this.httpClient.patch(S.a.apiUrl+"banners/"+e.id,e)}deleteBanner(e){return this.httpClient.delete(S.a.apiUrl+"banners/"+e)}}return e.\u0275fac=function(n){return new(n||e)(o.ac(v.c))},e.\u0275prov=o.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=t("OlR4"),w=t("NFeN"),B=t("Xa2L");function y(e,n){1&e&&(o.Tb(0,"mat-header-cell"),o.Lc(1," Image "),o.Sb())}function A(e,n){if(1&e&&(o.Tb(0,"mat-cell"),o.Ob(1,"img",19),o.Sb()),2&e){const e=n.$implicit;o.Ab(1),o.oc("src",e.image_url,o.Cc)}}function I(e,n){1&e&&(o.Tb(0,"mat-header-cell"),o.Lc(1," Actions "),o.Sb())}function k(e,n){if(1&e){const e=o.Ub();o.Tb(0,"mat-cell"),o.Tb(1,"button",20),o.dc("click",function(){o.Bc(e);const t=n.$implicit;return o.hc().editBanner(t)}),o.Tb(2,"mat-icon"),o.Lc(3,"create"),o.Sb(),o.Sb(),o.Lc(4,"\xa0 "),o.Tb(5,"button",21),o.dc("click",function(){o.Bc(e);const t=n.$implicit,a=n.index;return o.hc().deleteBanner(t.id,a)}),o.Tb(6,"mat-icon"),o.Lc(7,"delete"),o.Sb(),o.Sb(),o.Sb()}}function L(e,n){1&e&&o.Ob(0,"mat-header-row")}function J(e,n){1&e&&o.Ob(0,"mat-row")}function O(e,n){1&e&&(o.Tb(0,"div",22),o.Lc(1," No records found "),o.Sb())}function R(e,n){1&e&&(o.Tb(0,"div",22),o.Lc(1,"Please wait...."),o.Sb())}function E(e,n){1&e&&o.Ob(0,"mat-spinner",23),2&e&&o.oc("diameter",20)}const D=function(){return[5,10,20]};let N=(()=>{class e{constructor(e,n,t,a){this.bannersService=e,this.commonService=n,this.cdr=t,this.dialog=a,this.displayedColumns=["image","actions"],this.banners=[],this.loaded=!1}ngOnInit(){this.bannersService.getBanners().subscribe(e=>{this.banners=e.banners,this.renderBanners(),this.loaded=!0,this.cdr.detectChanges()})}addBanner(){this.dialog.open(p,{width:"440px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.bannersService.addBanner(e.banner).subscribe(e=>{this.banners.push(e.banner),this.commonService.openSnackBar(e.message),this.renderBanners()},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})})}renderBanners(){this.dataSource=new r.k(this.banners),this.dataSource.paginator=this.paginator}editBanner(e){this.dialog.open(p,{data:{banner:e},width:"440px",disableClose:!0}).afterClosed().subscribe(n=>{n&&this.bannersService.updateBanner(n.banner).subscribe(t=>{e=n.banner,this.commonService.openSnackBar(t.message),this.renderBanners()},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})})}deleteBanner(e,n){this.dialog.open(f.a,{data:{title:"Delete banner",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(t=>{t&&t.confirm&&this.bannersService.deleteBanner(e).subscribe(e=>{this.banners.splice(n,1),this.renderBanners(),this.commonService.openSnackBar(e.message)},({error:e})=>{this.commonService.openSnackBar(e.message,4e3)})})}}return e.\u0275fac=function(n){return new(n||e)(o.Nb(C),o.Nb(T.a),o.Nb(o.h),o.Nb(c.c))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-banners"]],viewQuery:function(e,n){if(1&e&&o.Fc(i.a,!0),2&e){let e;o.wc(e=o.ec())&&(n.paginator=e.first)}},decls:25,vars:10,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","image"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],[1,"img-fluid","w-25",3,"src"],["mat-icon-button","","color","primary","matTooltip","Edit user",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete user","type","button",3,"click"],[1,"mat-table-message"],[3,"diameter"]],template:function(e,n){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"h3"),o.Lc(4,"Banners"),o.Sb(),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"button",4),o.dc("click",function(){return n.addBanner()}),o.Lc(7,"Add Banners"),o.Sb(),o.Sb(),o.Sb(),o.Tb(8,"div",5),o.Tb(9,"div",6),o.Tb(10,"mat-table",7,8),o.Rb(12,9),o.Jc(13,y,2,0,"mat-header-cell",10),o.Jc(14,A,2,1,"mat-cell",11),o.Qb(),o.Rb(15,12),o.Jc(16,I,2,0,"mat-header-cell",10),o.Jc(17,k,8,0,"mat-cell",11),o.Qb(),o.Jc(18,L,1,0,"mat-header-row",13),o.Jc(19,J,1,0,"mat-row",14),o.Sb(),o.Jc(20,O,2,0,"div",15),o.Jc(21,R,2,0,"div",15),o.Sb(),o.Tb(22,"div",16),o.Jc(23,E,1,1,"mat-spinner",17),o.Ob(24,"mat-paginator",18),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Ab(10),o.oc("dataSource",n.dataSource),o.Ab(8),o.oc("matHeaderRowDef",n.displayedColumns),o.Ab(1),o.oc("matRowDefColumns",n.displayedColumns),o.Ab(1),o.oc("ngIf",n.loaded&&0==n.banners.length),o.Ab(1),o.oc("ngIf",!n.loaded),o.Ab(2),o.oc("ngIf",!n.loaded),o.Ab(1),o.oc("pageSize",10)("pageSizeOptions",o.rc(9,D))("showFirstLastButtons",!0))},directives:[r.j,r.c,r.e,r.b,r.g,r.i,a.n,i.a,r.d,r.a,b.b,w.a,r.f,r.h,B.b],styles:[".mat-table-wrapper[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{min-width:800px;width:100%}"]}),e})();var M=t("tyNb"),x=t("kmnG"),P=t("93Pz");let U=(()=>{class e{}return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(n){return new(n||e)},imports:[[a.c,P.a,b.c,r.l,i.b,w.b,B.a,s.j,x.e,c.e,d.b,M.k.forChild([{path:"",component:N}])]]}),e})()}}]);