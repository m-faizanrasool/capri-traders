(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{a1ig:function(t,e,c){"use strict";c.r(e),c.d(e,"ProductsModule",function(){return tt});var i=c("ofXK"),a=c("3Pt+"),s=c("M9IT"),o=c("JX91"),r=c("eIep"),n=c("Kj3r"),l=c("nYR2"),b=c("zyfY"),d=c("0wwu"),u=c("fXoL"),m=c("S3Px"),p=c("OlR4"),h=c("0IaG"),f=c("kmnG"),g=c("qFsG"),S=c("+0xr"),v=c("bTqV"),T=c("NFeN"),y=c("Xa2L");function w(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Name "),u.Sb())}function C(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.name," ")}}function P(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Brand "),u.Sb())}function L(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.brand?t.brand.name:""," ")}}function J(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Quantity "),u.Sb())}function D(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Oc(" ",t.unit_quantity," ",t.unit.abbr," ")}}function A(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Purchase Price "),u.Sb())}function R(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.purchase_price," ")}}function I(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Sale Price "),u.Sb())}function O(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.sale_price," ")}}function _(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Discount "),u.Sb())}function k(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.discount," ")}}function N(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Description "),u.Sb())}function Q(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Lc(1),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.Nc(" ",t.description," ")}}function $(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Image "),u.Sb())}function j(t,e){if(1&t&&(u.Tb(0,"mat-cell"),u.Ob(1,"img",32),u.Sb()),2&t){const t=e.$implicit;u.Ab(1),u.oc("src",t.image_url,u.Cc)}}function q(t,e){1&t&&(u.Tb(0,"mat-header-cell"),u.Lc(1," Actions "),u.Sb())}function x(t,e){1&t&&(u.Tb(0,"mat-icon"),u.Lc(1,"visibility"),u.Sb())}function B(t,e){1&t&&(u.Tb(0,"mat-icon"),u.Lc(1,"visibility_off"),u.Sb())}function z(t,e){if(1&t){const t=u.Ub();u.Tb(0,"mat-cell"),u.Tb(1,"button",33),u.dc("click",function(){u.Bc(t);const c=e.$implicit;return u.hc().editProduct(c)}),u.Tb(2,"mat-icon"),u.Lc(3,"create"),u.Sb(),u.Sb(),u.Lc(4,"\xa0 "),u.Tb(5,"button",34),u.dc("click",function(){u.Bc(t);const c=e.$implicit,i=e.index;return u.hc().deleteProduct(c.id,i)}),u.Tb(6,"mat-icon"),u.Lc(7,"delete"),u.Sb(),u.Sb(),u.Tb(8,"button",35),u.dc("click",function(){u.Bc(t);const c=e.$implicit;return u.hc().toggleVisiblity(c)}),u.Jc(9,x,2,0,"mat-icon",36),u.Jc(10,B,2,0,"mat-icon",36),u.Sb(),u.Sb()}if(2&t){const t=e.$implicit;u.Ab(8),u.oc("color",t.is_visible?"primary":"light")("disabled",t.disabled),u.Ab(1),u.oc("ngIf",t.is_visible),u.Ab(1),u.oc("ngIf",!t.is_visible)}}function F(t,e){1&t&&u.Ob(0,"mat-header-row")}function H(t,e){1&t&&u.Ob(0,"mat-row")}function V(t,e){1&t&&(u.Tb(0,"div",37),u.Lc(1," No records found "),u.Sb())}function M(t,e){1&t&&(u.Tb(0,"div",37),u.Lc(1," Please wait.... "),u.Sb())}function X(t,e){1&t&&u.Ob(0,"mat-spinner",38),2&t&&u.oc("diameter",20)}let G=(()=>{class t{constructor(t,e,c,i){this.productsService=t,this.commonService=e,this.cdr=c,this.dialog=i,this.loaded=!1,this.subscriptions=[],this.search=new a.f(""),this.pageIndex=0,this.pageSize=20,this.products=[],this.displayedColumns=["name","brand","quantity","purchase_price","sale_price","discount","description","image","actions"]}ngOnInit(){this.productsService.getCreateProductParams().subscribe(t=>{this.productData=t})}ngAfterViewInit(){this.search.valueChanges.subscribe(()=>{this.paginator.pageIndex=0});const t=this.paginator.page.pipe(Object(o.a)({}),Object(r.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this)),e=this.search.valueChanges.pipe(Object(n.a)(1e3),Object(r.a)(this.prepareQueryParams.bind(this))).subscribe(this.handleResponse.bind(this));this.subscriptions.push(t,e)}prepareQueryParams(){return this.loaded=!1,this.queryParams={page_index:this.paginator.pageIndex,search:this.search.value,items_per_page:this.pageSize},this.productsService.getProducts(this.queryParams)}handleResponse(t){this.totalProducts=t.total,this.products=t.products,this.loaded=!0,this.cdr.detectChanges()}addProduct(){this.dialog.open(d.a,{data:{paramsData:this.productData},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.productsService.getProducts(this.queryParams).subscribe(this.handleResponse.bind(this))})}editProduct(t){this.dialog.open(d.a,{data:{paramsData:this.productData,product:t},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.productsService.getProducts(this.queryParams).subscribe(this.handleResponse.bind(this))})}toggleVisiblity(t){t.disabled=!0,t.is_visible=!t.is_visible,this.productsService.toggle_visibility(t.id).pipe(Object(l.a)(()=>{t.disabled=!1,this.cdr.detectChanges()})).subscribe()}deleteProduct(t,e){this.dialog.open(b.a,{data:{title:"Delete category",message:"Are you sure?"},width:"440px",disableClose:!0}).afterClosed().subscribe(c=>{c&&c.confirm&&this.productsService.deleteProduct(t).subscribe(t=>{const c=[...this.products];c.splice(e,1),this.products=c,this.cdr.detectChanges(),this.commonService.openSnackBar(t.message)},({error:t})=>{this.commonService.openSnackBar(t.message,4e3)})})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(m.a),u.Nb(p.a),u.Nb(u.h),u.Nb(h.c))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&u.Fc(s.a,!0),2&t){let t;u.wc(t=u.ec())&&(e.paginator=t.first)}},decls:52,vars:11,consts:[[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card-body"],[1,"form","mb-3"],[1,"form-filtration"],[1,"row","align-items-center"],[1,"col-lg-3","kt-margin-bottom-10-mobile"],[1,"mat-form-field-fluid"],["matInput","","placeholder","Search Products",3,"formControl"],[1,"mat-table-wrapper"],[3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","brand"],["matColumnDef","quantity"],["matColumnDef","purchase_price"],["matColumnDef","sale_price"],["matColumnDef","discount"],["matColumnDef","description"],["matColumnDef","image"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-table-message",4,"ngIf"],[1,"mat-table-bottom"],[3,"diameter",4,"ngIf"],[3,"pageSize","showFirstLastButtons","length"],[1,"img-fluid","w-75",3,"src"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn","type","button",3,"click"],["mat-icon-button","","type","button",3,"color","disabled","click"],[4,"ngIf"],[1,"mat-table-message"],[3,"diameter"]],template:function(t,e){1&t&&(u.Tb(0,"div",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"h3"),u.Lc(4,"Products"),u.Sb(),u.Sb(),u.Tb(5,"div",3),u.Tb(6,"button",4),u.dc("click",function(){return e.addProduct()}),u.Lc(7," Add Product "),u.Sb(),u.Sb(),u.Sb(),u.Tb(8,"div",5),u.Tb(9,"div",6),u.Tb(10,"div",7),u.Tb(11,"div",8),u.Tb(12,"div",9),u.Tb(13,"mat-form-field",10),u.Ob(14,"input",11),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(15,"div",12),u.Tb(16,"mat-table",13,14),u.Rb(18,15),u.Jc(19,w,2,0,"mat-header-cell",16),u.Jc(20,C,2,1,"mat-cell",17),u.Qb(),u.Rb(21,18),u.Jc(22,P,2,0,"mat-header-cell",16),u.Jc(23,L,2,1,"mat-cell",17),u.Qb(),u.Rb(24,19),u.Jc(25,J,2,0,"mat-header-cell",16),u.Jc(26,D,2,2,"mat-cell",17),u.Qb(),u.Rb(27,20),u.Jc(28,A,2,0,"mat-header-cell",16),u.Jc(29,R,2,1,"mat-cell",17),u.Qb(),u.Rb(30,21),u.Jc(31,I,2,0,"mat-header-cell",16),u.Jc(32,O,2,1,"mat-cell",17),u.Qb(),u.Rb(33,22),u.Jc(34,_,2,0,"mat-header-cell",16),u.Jc(35,k,2,1,"mat-cell",17),u.Qb(),u.Rb(36,23),u.Jc(37,N,2,0,"mat-header-cell",16),u.Jc(38,Q,2,1,"mat-cell",17),u.Qb(),u.Rb(39,24),u.Jc(40,$,2,0,"mat-header-cell",16),u.Jc(41,j,2,1,"mat-cell",17),u.Qb(),u.Rb(42,25),u.Jc(43,q,2,0,"mat-header-cell",16),u.Jc(44,z,11,4,"mat-cell",17),u.Qb(),u.Jc(45,F,1,0,"mat-header-row",26),u.Jc(46,H,1,0,"mat-row",27),u.Sb(),u.Jc(47,V,2,0,"div",28),u.Jc(48,M,2,0,"div",28),u.Sb(),u.Tb(49,"div",29),u.Jc(50,X,1,1,"mat-spinner",30),u.Ob(51,"mat-paginator",31),u.Sb(),u.Sb(),u.Sb()),2&t&&(u.Ab(6),u.oc("disabled",!e.loaded),u.Ab(8),u.oc("formControl",e.search),u.Ab(2),u.oc("dataSource",e.products),u.Ab(29),u.oc("matHeaderRowDef",e.displayedColumns),u.Ab(1),u.oc("matRowDefColumns",e.displayedColumns),u.Ab(1),u.oc("ngIf",e.loaded&&0==e.products.length),u.Ab(1),u.oc("ngIf",!e.loaded&&!e.products.length),u.Ab(2),u.oc("ngIf",!e.loaded),u.Ab(1),u.oc("pageSize",e.pageSize)("showFirstLastButtons",!0)("length",e.totalProducts))},directives:[f.c,g.a,a.c,a.n,a.g,S.j,S.c,S.e,S.b,S.g,S.i,i.n,s.a,S.d,S.a,v.b,T.a,S.f,S.h,y.b],styles:[""]}),t})();var K=c("tyNb");let U=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Hb({type:t,selectors:[["app-products"]],decls:1,vars:0,template:function(t,e){1&t&&u.Ob(0,"router-outlet")},directives:[K.l],styles:[""]}),t})();var Y=c("93Pz"),E=c("d3UM"),W=c("rIor"),Z=c("ZOsW");let tt=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[{provide:h.b,useValue:{hasBackdrop:!0,panelClass:"mat-dialog-container-wrapper",height:"auto",width:"900px"}}],imports:[[i.c,v.c,S.l,s.b,y.a,T.b,Y.a,h.e,a.j,a.t,v.c,E.b,g.b,Z.a,W.b,K.k.forChild([{path:"",component:U,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:G}]}])]]}),t})()}}]);